<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="keywords" content=""/>
    <meta name="description" content="A minimalist programmer, photographer and lifes lover."/>
    <title>『翻译』PHP 强制转换 vs. intval - Crisp Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">
    <link rel="stylesheet" href="/css/style.css" media="screen and (min-width: 801px)">
    <link rel="stylesheet" href="/css/mobile.css" media="screen and (max-width: 800px)">
    <link rel="stylesheet" href="/css/zenburn.css">
    <link rel="stylesheet" href="/css/opensans.css">
    <!-- <link rel="stylesheet" href="/css/font-awesome.min.css"> -->
    <script src="/script/highlight.pack.js"></script>
    <script src="/script/jquery-3.1.0.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <div class="menu">
      <div class="menu-home">
        <a href="/" style="color: #000000;">DAVID ZHANG</a>
      </div>
      <div class="menu-links">
        <div class="menu-item">
          <a href="/blogs.html">BLOGS</a>
        </div>
        <div class="menu-item">
          <a href="/projects.html">PROJECTS</a>
        </div>
        <div class="menu-item">
          <a href="/things.html">THINGS</a>
        </div>
        <div class="menu-item">
          <a href="/about.html">ABOUT</a>
        </div>
      </div>
    </div>
    <div id="content">
      <div id="container">
        <div class="article">
          <div class="article-head">
            <div class="article-title">『翻译』PHP 强制转换 vs. intval</div>
            <div class="article-date">2014/09/03</div>
          </div>
          <div class="article-main">
            <h1 id="section">原文信息</h1>

<p>Original Post: <a href="http://hakre.wordpress.com/2010/05/13/php-casting-vs-intval">PHP: Casting vs. intval()</a></p>

<p>By <strong>Hakre</strong>, <a href="http://hakre.wordpress.com">hakre.wordpress.com</a>, May 13th, 2010</p>

<p>Translated by <a href="http://crispgm.com">Crisp</a></p>

<h1 id="section-1">正文</h1>

<p>在 PHP 中，使用 <code class="highlighter-rouge">(int)$var</code> 方式进行类型转换比使用 <code class="highlighter-rouge">intval($var)</code> 函数方式快 400% 到 650%。</p>

<h2 id="section-2">运行测试</h2>

<h3 id="intval-vs-intvalval--1">(int)$val vs. intval($val) 速度对比[系统 #1]</h3>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>(INT)$val</th>
      <th>INTVAL($val)</th>
      <th>比率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 0.068180</td>
      <td>/ 0.448819</td>
      <td>658%</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: 0.067972</td>
      <td>/ 0.448907</td>
      <td>660%</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 0.072348</td>
      <td>/ 0.450288</td>
      <td>622%</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 0.087305</td>
      <td>/ 0.469350</td>
      <td>537%</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 0.087590</td>
      <td>/ 0.471153</td>
      <td>537%</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: 0.089154</td>
      <td>/ 0.469826</td>
      <td>526%</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>34</td>
      <td>: 0.068234</td>
      <td>/ 0.451035</td>
      <td>661%</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 0.089344</td>
      <td>/ 0.470391</td>
      <td>526%</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>0x1A</td>
      <td>: 0.072989</td>
      <td>/ 0.451909</td>
      <td>619%</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 0.088196</td>
      <td>/ 0.469347</td>
      <td>532%</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>26</td>
      <td>: 0.068378</td>
      <td>/ 0.449884</td>
      <td>657%</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 0.068770</td>
      <td>/ 0.449416</td>
      <td>653%</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 0.068927</td>
      <td>/ 0.448028</td>
      <td>650%</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: 0.072599</td>
      <td>/ 0.450618</td>
      <td>620%</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>4.2E+20</td>
      <td>: 0.086305</td>
      <td>/ 0.467347</td>
      <td>541%</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 0.102120</td>
      <td>/ 0.484245</td>
      <td>474%</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 0.092310</td>
      <td>/ 0.472185</td>
      <td>511%</td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 0.112644</td>
      <td>/ 0.494482</td>
      <td>438%</td>
    </tr>
  </tbody>
</table>

<h3 id="intval-vs-intvalval--2">(int)$val vs. intval($val) 速度对比[系统 #2]</h3>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>(INT)$val</th>
      <th>INTVAL($val)</th>
      <th>比率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 0.045576</td>
      <td>/ 0.194759</td>
      <td>427%</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: 0.042457</td>
      <td>/ 0.194273</td>
      <td>457%</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 0.047853</td>
      <td>/ 0.196049</td>
      <td>409%</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 0.055792</td>
      <td>/ 0.209531</td>
      <td>375%</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 0.055158</td>
      <td>/ 0.208236</td>
      <td>377%</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: 0.056604</td>
      <td>/ 0.209486</td>
      <td>370%</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>34</td>
      <td>: 0.042580</td>
      <td>/ 0.194606</td>
      <td>457%</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 0.056834</td>
      <td>/ 0.209276</td>
      <td>368%</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>0x1A</td>
      <td>: 0.045320</td>
      <td>/ 0.196626</td>
      <td>433%</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 0.054923</td>
      <td>/ 0.209295</td>
      <td>381%</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>26</td>
      <td>: 0.042582</td>
      <td>/ 0.195295</td>
      <td>458%</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 0.042673</td>
      <td>/ 0.194469</td>
      <td>455%</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 0.042560</td>
      <td>/ 0.194363</td>
      <td>456%</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: 0.045553</td>
      <td>/ 0.197149</td>
      <td>432%</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>4.2E+20</td>
      <td>: 0.054069</td>
      <td>/ 0.206131</td>
      <td>381%</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 0.066170</td>
      <td>/ 0.218996</td>
      <td>330%</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 0.057587</td>
      <td>/ 0.210010</td>
      <td>364%</td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 0.071908</td>
      <td>/ 0.224338</td>
      <td>311%</td>
    </tr>
  </tbody>
</table>

<p>这组测试每个项目进行了 100000 次循环。两个测试都在 Windows 上运行。系统 #1 使用的是 PHP 5.2.8，而系统 #2 使用 PHP 5.2.9 并且有更高的 CPU、内存和硬盘速度。</p>

<h3 id="intval--int-">intval() 和 int 的结果对比</h3>

<p>为了证明 <code class="highlighter-rouge">intval()</code> 和 <code class="highlighter-rouge">int</code> 得到同样的值，我进行了另一个测试：</p>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>期待结果</th>
      <th>INTVAL($val)</th>
      <th>(INT)$val</th>
      <th>结果</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: -42</td>
      <td>/ -42</td>
      <td>/ -42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 4</td>
      <td>/ 4</td>
      <td>/ 4</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: -42</td>
      <td>/ -42</td>
      <td>/ -42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>34</td>
      <td>: 34</td>
      <td>/ 34</td>
      <td>/ 34</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>0x1A</td>
      <td>: 1410065408</td>
      <td>/ 1410065408</td>
      <td>/ 1410065408</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 1</td>
      <td>/ 1</td>
      <td>/ 1</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>26</td>
      <td>: 26</td>
      <td>/ 26</td>
      <td>/ 26</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 42000000</td>
      <td>/ 42000000</td>
      <td>/ 42000000</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 2147483647</td>
      <td>/ 2147483647</td>
      <td>/ 2147483647</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: -2147483648</td>
      <td>/ -2147483648</td>
      <td>/ -2147483648</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>4.2E+20</td>
      <td>: 0</td>
      <td>/ 0</td>
      <td>/ 0</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 2147483647</td>
      <td>/ 2147483647</td>
      <td>/ 2147483647</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 0</td>
      <td>/ 0</td>
      <td>/ 0</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 1</td>
      <td>/ 1</td>
      <td>/ 1</td>
      <td>通过</td>
    </tr>
  </tbody>
</table>

<h3 id="settype--intval--1">settype() 和 intval() 速度对比[系统 #1]</h3>

<p>用于对比，我还进行了 <code class="highlighter-rouge">settype()</code> 和 <code class="highlighter-rouge">intval()</code> 速度测试。
两者的差别并不大，但我不确定这个测试是否合理，因为并不容易直接对这个函数进行测试。既然已经跑了这个测试，我认为值得把结果同前面的数据一起分享出来。</p>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>SETTYPE($val)</th>
      <th>INTVAL($val)</th>
      <th>比率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 0.533901</td>
      <td>/ 0.477519</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: 0.533729</td>
      <td>/ 0.478345</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 0.536932</td>
      <td>/ 0.480030</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 0.547209</td>
      <td>/ 0.503447</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 0.553214</td>
      <td>/ 0.501764</td>
      <td>90%</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: 0.551974</td>
      <td>/ 0.503403</td>
      <td>91%</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>34</td>
      <td>: 0.532637</td>
      <td>/ 0.478039</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 0.552709</td>
      <td>/ 0.505796</td>
      <td>91%</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>0x1A</td>
      <td>: 0.536864</td>
      <td>/ 0.481672</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 0.550352</td>
      <td>/ 0.506748</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>26</td>
      <td>: 0.537672</td>
      <td>/ 0.478947</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 0.536360</td>
      <td>/ 0.478373</td>
      <td>89%</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 0.541348</td>
      <td>/ 0.490556</td>
      <td>90%</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: 0.539018</td>
      <td>/ 0.486669</td>
      <td>90%</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>4.2E+20</td>
      <td>: 0.554357</td>
      <td>/ 0.499877</td>
      <td>90%</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 0.566189</td>
      <td>/ 0.522929</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 0.549919</td>
      <td>/ 0.505488</td>
      <td>91%</td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 0.578893</td>
      <td>/ 0.527864</td>
      <td>91%</td>
    </tr>
  </tbody>
</table>

<p>更新：</p>

<p>我进行了一些关于 <code class="highlighter-rouge">0 + $var</code> 的测试，因为这也是一种获得数字的方式。
这种方法没那么”类型安全”，不过作为对比，我认为有必要一起列出来：</p>

<h3 id="intval--0--var-">intval() 和 0 + $var 对比结果</h3>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>期待结果</th>
      <th>INTVAL($val)</th>
      <th>0+$VAR</th>
      <th>结果</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: -42</td>
      <td>/ -42</td>
      <td>/ -42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 4</td>
      <td>/ 4</td>
      <td>/ 4.2</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: -42</td>
      <td>/ -42</td>
      <td>/ -42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>042</td>
      <td>: 34</td>
      <td>/ 34</td>
      <td>/ 34</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 42</td>
      <td>/ 42</td>
      <td>/ 42</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>1e10</td>
      <td>: 1410065408</td>
      <td>/ 1410065408</td>
      <td>/ 10000000000</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 1</td>
      <td>/ 1</td>
      <td>/ 10000000000</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>0x1A</td>
      <td>: 26</td>
      <td>/ 26</td>
      <td>/ 26</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 42000000</td>
      <td>/ 42000000</td>
      <td>/ 42000000</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 2147483647</td>
      <td>/ 2147483647</td>
      <td>/ 2147483647</td>
      <td>通过</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: -2147483648</td>
      <td>/ -2147483648</td>
      <td>/ 2147483648</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>420000000000000000000</td>
      <td>: 0</td>
      <td>/ 0</td>
      <td>/ 4.2E+20</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 2147483647</td>
      <td>/ 2147483647</td>
      <td>/ 4.2E+20</td>
      <td>不通过</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 0</td>
      <td>/ 0</td>
      <td>/ 报错</td>
      <td>跳过</td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 1</td>
      <td>/ 1</td>
      <td>/ 报错</td>
      <td>跳过</td>
    </tr>
  </tbody>
</table>

<h3 id="intval0--var-1">(int)$val和0 + $var速度测试[系统 #1]</h3>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>输入</th>
      <th>(INT)$val</th>
      <th>0+$val</th>
      <th>比率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>#0</td>
      <td>42</td>
      <td>: 0.068794</td>
      <td>/ 0.069249</td>
      <td>100%</td>
    </tr>
    <tr>
      <td>#1</td>
      <td>-42</td>
      <td>: 0.074688</td>
      <td>/ 0.069155</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#2</td>
      <td>4.2</td>
      <td>: 0.073207</td>
      <td>/ 0.069257</td>
      <td>94%*</td>
    </tr>
    <tr>
      <td>#3</td>
      <td>‘42’</td>
      <td>: 0.086568</td>
      <td>/ 0.076261</td>
      <td>88%</td>
    </tr>
    <tr>
      <td>#4</td>
      <td>‘+42’</td>
      <td>: 0.087230</td>
      <td>/ 0.080867</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#5</td>
      <td>‘-42’</td>
      <td>: 0.090189</td>
      <td>/ 0.075923</td>
      <td>84%</td>
    </tr>
    <tr>
      <td>#6</td>
      <td>042</td>
      <td>: 0.069072</td>
      <td>/ 0.069243</td>
      <td>100%</td>
    </tr>
    <tr>
      <td>#7</td>
      <td>‘042’</td>
      <td>: 0.088535</td>
      <td>/ 0.082137</td>
      <td>92%</td>
    </tr>
    <tr>
      <td>#8</td>
      <td>1e10</td>
      <td>: 0.072930</td>
      <td>/ 0.069512</td>
      <td>95%*</td>
    </tr>
    <tr>
      <td>#9</td>
      <td>‘1e10’</td>
      <td>: 0.086942</td>
      <td>/ 0.082032</td>
      <td>94%</td>
    </tr>
    <tr>
      <td>#10</td>
      <td>0x1A</td>
      <td>: 0.068921</td>
      <td>/ 0.069365</td>
      <td>100%</td>
    </tr>
    <tr>
      <td>#11</td>
      <td>42000000</td>
      <td>: 0.069203</td>
      <td>/ 0.069415</td>
      <td>100%</td>
    </tr>
    <tr>
      <td>#12</td>
      <td>2147483647</td>
      <td>: 0.069109</td>
      <td>/ 0.069386</td>
      <td>100%</td>
    </tr>
    <tr>
      <td>#13</td>
      <td>2147483648</td>
      <td>: 0.073053</td>
      <td>/ 0.069277</td>
      <td>94%*</td>
    </tr>
    <tr>
      <td>#14</td>
      <td>420000000000000000000</td>
      <td>: 0.092318</td>
      <td>/ 0.069463</td>
      <td>75%*</td>
    </tr>
    <tr>
      <td>#15</td>
      <td>‘420000000000000000000’</td>
      <td>: 0.105735</td>
      <td>/ 0.211617</td>
      <td>200%*</td>
    </tr>
    <tr>
      <td>#16</td>
      <td>array()</td>
      <td>: 跳过</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>#17</td>
      <td>array(‘foo’, ‘bar’)</td>
      <td>: 跳过</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><em>*: 在上一个测试中，结果未通过</em></p>

<h2 id="section-3">测试结论</h2>

<p>使用 (int) 类型转换，便捷而且没有负面效果。
事实上，它在速度快的同时，还和 intval() 函数有完全一样的结果。
两者甚至还会有同样的 warning 信息。</p>

<h2 id="section-4">扩展阅读</h2>

<ul>
  <li><a href="http://stackoverflow.com/questions/1912599/php-is-there-any-particular-difference-between-intval-and-int">PHP: Is there any particular difference between intval and (int)?</a></li>
  <li><a href="http://stackoverflow.com/questions/239136/fastest-way-to-convert-string-to-integer-in-php">Fastest way to convert string to integer in PHP</a></li>
</ul>

<h2 id="section-5">深层原因</h2>

<p>对于作者的结论，网友 Joseph Scott 对 OPCODE 进行了分析，解释了其深层原因。</p>

<h3 id="intval">intval()</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>0 ASSIGN
1 SEND_VAR
2 DO_FCALL
3 ASSIGN
4 RETURN
5* ZEND_HANDLE_EXCEPTION
</code></pre>
</div>

<h3 id="int">int</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>0 ASSIGN
1 CAST
2 ASSIGN
3 RETURN
4* ZEND_HANDLE_EXCEPTION
</code></pre>
</div>

<h2 id="section-6">最终结论</h2>

<ol>
  <li><code class="highlighter-rouge">int</code> 比 <code class="highlighter-rouge">intval()</code> 快3-6倍。</li>
  <li><code class="highlighter-rouge">SEND_VAR</code> 和 <code class="highlighter-rouge">DO_FCALL</code> 操作，是导致 <code class="highlighter-rouge">int</code> 比 <code class="highlighter-rouge">intval()</code> 快很多的原因。</li>
</ol>

          </div>
          
          <div class="article-tag">
            
            <div class="tag-item">
            PHP
            </div>
            
            <div class="tag-item">
            Hacks
            </div>
            
          </div>
          
          <script>
var disqus_shortname = 'crispgm';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

        </div>
      </div>
    </div>
    <footer>
      <div>Copyright &copy; David Zhang, 2016.</div>
    </footer>
    <script>
    <!-- Google Analytics -->
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50708664-1', 'crispgm.com');
    ga('send', 'pageview');
    </script>
  </body>
</html>