<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Crisp Home</title>
<link rel="stylesheet" href="http://crispgm.github.io/static/bootstrap.min.css">
<link rel="stylesheet" href="http://crispgm.github.io/static/bootstrap-theme.min.css">
<link rel="stylesheet" href="http://crispgm.github.io/static/style.css">
<link rel="stylesheet" href="http://crispgm.github.io/static/vs.css">
<script src="http://crispgm.github.io/static/highlight.pack.js"></script>
<script src="http://crispgm.github.io/static/bootstrap.min.js"></script>
<script src="http://crispgm.github.io/static/jquery-2.0.3.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div class="container">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://crispgm.github.io/">Crisp Home</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://github.com/crispgm">Github</a></li>
            <li><a href="http://crispgm.github.io/page/about.html">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
</div>
<div class="container">

<div class="article"><div class="article_head"><div class="article_title">Fiddler网络调试工具</div>
<div class="article_date">2014/03/21</div>
</div><div class="article_main"><h3>什么是Fiddler</h3>

<p>Fiddler官方给Fiddler的描述语是Web Debugging Proxy，也就是web调试代理工具。</p>

<p>主要功能有：</p>

<ul>
<li><p>截取HTTP/HTTPS请求</p></li>
<li><p>修改Session</p></li>
<li><p>网络调试</p></li>
<li><p>安全测试</p></li>
<li><p>性能测试</p></li>
</ul>

<p>本文，主要讨论前三项功能的使用方法，包括Fiddler的基础配置和功能以及使用内置FiddlerScript脚本进行复杂功能调试。</p>

<h3>准备和配置</h3>

<p>Fiddler使用C#开发，支持Windows XP以上版本。对于Linux和Mac用户，有一个基于Mono的Alpha版本，经本人Mac实际测试，基本上算是不能用的状态。因此，不建议使用。</p>

<p>下载地址：<a href="http://www.telerik.com/download/fiddler">http://www.telerik.com/download/fiddler</a></p>

<p>安装完毕后，为了使用后续功能，建议安装<a href="http://www.telerik.com/download/fiddler/fiddlerscript-editor">FiddlerScript Editor</a>插件，否则修改FiddlerScript会比较麻烦。</p>

<p>准备完毕后，请打开Fiddler进入Tools->Fiddler Options，在Connections中勾选Allow remote computers to connect，并重新启动Fiddler。</p>

<h3>网络请求抓取</h3>

<p>完成了上述设置后，Fiddler就已经可以抓取本地的网络请求</p>

<p><img src="http://crispgm.github.io/image/fiddler/capturing.png" alt="Fiddler Filters" /></p>

<p>并且可以通过代理功能，将其他在同一WIFI中手机或电脑代理到你的IP上，这时就可以获取它们的网络请求。</p>

<pre><code>iPhone  
进入Settings -&gt; WLAN，单击你连接中的WIFI，在HTTP PROXY下选择Manual，然后Server填写Fiddler所在机器在此WIFI中的IP地址，Port是默认的8888。

Android
进入设置 -&gt; WIFI，长按你连接中的WIFI，点击修改网络网络，勾选高级选项，在HTTP代理中填写主机名和端口。
</code></pre>

<p>选中请求后，可以查看Headers、Cookies和多种模式的(TextView/WebForms等)请求参数。</p>

<p><img src="http://crispgm.github.io/image/fiddler/request.png" alt="Fiddler Filters" /></p>

<p>如果想查看Response，则可以选中请求后点击Inspectors或者直接双击请求查看响应Headers和多种格式的响应内容。对于常见的数据结构，可以格式化展示JSON或XML。</p>

<p><img src="http://crispgm.github.io/image/fiddler/response.png" alt="Fiddler Filters" /></p>

<h3>Filter</h3>

<p>很多时候，客户端一次行为可能会产生多次HTTP请求，会造成很大的干扰，Filter功能就可以选择性截取</p>

<p>首先进入Filters标签，勾选Use Filters</p>

<p>在Request Headers中，勾选Show only if URL contains，并在后面的输入框中填写希望截取的URL。同理，也可以勾选Hide if URL contains，隐藏特定的请求。</p>

<p><img src="http://crispgm.github.io/image/fiddler/filters.png" alt="Fiddler Filters" /></p>

<h3>HOSTS</h3>

<p>Fiddler自带有HOSTS功能，跟Windows自带的HOSTS应该是一回事，不过在Fiddler中操作比较方便，不用进入C:\Windows\System32\Drivers\Etc\HOSTS。</p>

<p>而是直接从菜单进入Tools -> HOSTS...，勾选Enable remapping of requests(此处省略数十字)</p>

<p><img src="http://crispgm.github.io/image/fiddler/hosts.png" alt="Fiddler Hosts" /></p>
</div>
</div>    <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    
    var disqus_shortname = 'crispgm'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>
<div>
<footer>
	Copyright &copy; Crisp, 2014.
</footer>
</div>
</body>
</html>
