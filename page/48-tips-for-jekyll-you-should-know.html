<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="A minimalist programmer, photographer and lifes lover."/>
    <title>48 个你需要知道的 Jekyll 使用技巧 | David Zhang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="https://crispgm.com/page/48-tips-for-jekyll-you-should-know.html">
    <link rel="alternate" href="https://crisp.lol/page/48-tips-for-jekyll-you-should-know.html">
    <link rel="alternate" href="https://crispgm.com/feed.xml" type="application/rss+xml" title="RSS">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/image/logo.png">
    
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/animatecss/3.5.2/animate.min.css">
    
    <link rel="stylesheet" href="/assets/css/tomorrow-night-eighties.css">
    
    
    <link rel="stylesheet" href="/assets/css/style.css">
  </head>
  <body>
    <div class="content" id="header">
          <header class="content-wrapper menu">
      <div class="menu-links">
        <div class="menu-item">
          <a href="/blog.html">Blog</a>
        </div>
        <div class="menu-item">
          <a href="/project.html">Project</a>
        </div>
        <div class="menu-item">
          <a href="/wiki/">Wiki</a>
        </div>
        <div class="menu-item">
          <a href="/things.html">Things</a>
        </div>
        <div class="menu-item">
          <a href="/bio.html">Bio</a>
        </div>
        <div class="menu-item">
          <a href="/about.html">About</a>
        </div>
      </div>
      <div class="menu-bars">
        <i id="dropdown-button" class="fa fa-bars"></i>
      </div>
      <div class="menu-home">
        <a href="/">DAVID ZHANG</a>
      </div>
    </header>

    </div>
    <div class="content" id="main-content">
      <div class="content-wrapper">
        <div class="article">
  <div class="article-head">
    <div class="article-title">48 个你需要知道的 Jekyll 使用技巧</div>
    <div class="article-date">November 19, 2016</div>
  </div>
  <div class="article-main">
    <p>很久以前，本人的个人博客是 PHP 写的简单页面，实时转换 Markdown。后来，为了简单，用 PHP 写了一个静态博客转换器。虽用起来还比较舒服，但通用性太差了。于是转向 GitHub Pages 官方支持的 Jekyll，没想到只花了20分钟就完成了迁移，开发体验颇好。深入使用和参与了许久后，决定写一篇 Jekyll 相关的 Tips 的文章，仅供大家参考。</p>

<h2 id="section">简介</h2>

<h4 id="jekyll">什么是 Jekyll</h4>

<p><a href="https://jekyllrb.com/">Jekyll</a> 是一个简单的，博客感知的，静态网站生成器。可以认为，Jekyll 是一个基于文件的内容管理系统（CMS）。它使用 Ruby 编写，通过 Markdown 和 Liquid 模板生成内容。</p>

<p>Jekyll 最初由 GitHub co-founder、前首席执行官 <a href="https://github.com/mojombo">Tom Preston-Werner</a> 创立。</p>

<p>目前，Jekyll 的维护者是 <a href="https://github.com/parkr">Parker Moore</a>，他本人也于<a href="https://byparker.com/blog/2016/joining-github/">2016年初加入了 GitHub</a>。</p>

<h4 id="section-1">安装</h4>

<p>首先，你得有 Ruby。对于 Mac 用户，可以使用 Homebrew 安装。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>brew install ruby
</code></pre>
</div>

<p>然后：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ gem install jekyll
</code></pre>
</div>

<h4 id="gem-">Gem 安装不上或者很慢怎么办？</h4>

<p>RubyGems 是一个优秀的包管理系统，但再优秀也扛不住墙和距离，所以一般情况下，中国大陆的用户需要更换 RubyGems 的源。</p>

<p>建议更换成 Ruby-China 的源，参考 <a href="https://gems.ruby-china.org/">https://gems.ruby-china.org/</a>。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/
</code></pre>
</div>

<p>同时，也广告一下本人的作品：<a href="https://crispgm.github.io/gsm/">Gem Sources Manager</a>，专门用于切换源。</p>

<h4 id="mac-osx-el-capitan-">Mac OSX El Capitan 安装失败</h4>

<p>从 Mac OSX El Capitan 开始，Apple 采取了一个叫 SIP 的东西保护系统文件夹，导致 <code class="highlighter-rouge">/usr/bin</code> 等文件夹无法写入。因此需要更换安装路径。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo gem install -n /usr/local/bin jekyll
</code></pre>
</div>

<p>详见 <a href="https://jekyllrb.com/docs/troubleshooting/#jekyll-amp-mac-os-x-1011">https://jekyllrb.com/docs/troubleshooting/#jekyll-amp-mac-os-x-1011</a></p>

<h4 id="bundler">Bundler</h4>

<p>Jekyll 3.3.0 之后开始采用 Bundler 方式运行。安装时，需要同时安装 Bundler：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ gem install jekyll bundler
</code></pre>
</div>

<p>所以所有命令可能也需要使用 Bundler：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bundle exec jekyll serve
</code></pre>
</div>

<h2 id="section-2">命令</h2>

<h4 id="jekyll-new-">使用 <code class="highlighter-rouge">jekyll new</code> 创建新站点</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll new my-jekyll-site
</code></pre>
</div>

<p>也可以：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ mkdir my-jekyll-site
$ cd my-jekyll-site
$ jekyll new .
</code></pre>
</div>

<h4 id="jekyll-serve-">使用 <code class="highlighter-rouge">jekyll serve</code> 在本地运行站点</h4>

<p>以下三种使用方式是等价的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll serve
$ jekyll server
$ jekyll s
</code></pre>
</div>

<p>通过 <code class="highlighter-rouge">http://localhost:4000</code> 进行访问。</p>

<h4 id="jekyll-build-">使用 <code class="highlighter-rouge">jekyll build</code> 生成站点</h4>

<p>以下两种使用方式是等价的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll build
$ jekyll b
</code></pre>
</div>

<p>通过 <code class="highlighter-rouge">--destination</code> 指定目标路径：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll build --destination=/path/to/site
</code></pre>
</div>

<h4 id="jekyll-new-theme-">使用 <code class="highlighter-rouge">jekyll new-theme</code> 创建主题</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll new-theme my-theme
</code></pre>
</div>

<h2 id="section-3">基础</h2>

<h4 id="section-4">目录结构</h4>

<p>一个基本的 Jekyll 站点目录结构：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.
├── _config.yml
├── _data
|   └── members.yml
├── _drafts
|   ├── begin-with-the-crazy-ideas.md
|   └── on-simplicity-in-technology.md
├── _includes
|   ├── footer.html
|   └── header.html
├── _layouts
|   ├── default.html
|   └── post.html
├── _posts
|   ├── 2007-10-29-why-every-programmer-should-play-nethack.md
|   └── 2009-04-26-barcamp-boston-4-roundup.md
├── _sass
|   ├── _base.scss
|   └── _layout.scss
├── _site
├── .jekyll-metadata
└── index.html # 也可以是 index.md
</code></pre>
</div>
<ul>
  <li>_config.yml
    <ul>
      <li>Jekyll 站点的总配置文件，有很多选项也可以通过命令行方式指定。</li>
    </ul>
  </li>
  <li>_drafts
    <ul>
      <li>未发布的草稿，文件名不需要带有日期。</li>
    </ul>
  </li>
  <li>_includes
    <ul>
      <li>代码片段，可以通过 <code class="highlighter-rouge">include</code> 进行引用。</li>
    </ul>
  </li>
  <li>_layouts
    <ul>
      <li>布局。布局文件可以被继承，<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">content</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> 用于表示被继承者的内容。</li>
    </ul>
  </li>
  <li>_posts
    <ul>
      <li>文件，命名需要以日期开头：如 <code class="highlighter-rouge">2016-12-01-my-article.md</code>。</li>
    </ul>
  </li>
  <li>_sass
    <ul>
      <li>sass 文件，可以通过插件完成编译。也可以选择引入原生 CSS，或者 Less 等。</li>
    </ul>
  </li>
  <li>_site
    <ul>
      <li>目标文件，建议加入到 <code class="highlighter-rouge">.gitignore</code> 中。</li>
    </ul>
  </li>
  <li>index.html/index.md
    <ul>
      <li>首页</li>
    </ul>
  </li>
</ul>

<h4 id="configyml">_config.yml</h4>

<p><code class="highlighter-rouge">_config.yml</code> 是整个站点的整体配置，以下是所有配置项和默认值：</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Where things are
source:       .
destination:  ./_site
plugins_dir:  _plugins
layouts_dir:  _layouts
data_dir:     _data
includes_dir: _includes
collections:
  posts:
    output:   true

# Handling Reading
safe:         false
include:      [".htaccess"]
exclude:      ["node_modules", "vendor/bundle/", "vendor/cache/", "vendor/gems/", "vendor/ruby/"]
keep_files:   [".git", ".svn"]
encoding:     "utf-8"
markdown_ext: "markdown,mkdown,mkdn,mkd,md"

# Filtering Content
show_drafts: null
limit_posts: 0
future:      false
unpublished: false

# Plugins
whitelist: []
gems:      []

# Conversion
markdown:    kramdown
highlighter: rouge
lsi:         false
excerpt_separator: "\n\n"
incremental: false

# Serving
detach:  false
port:    4000
host:    127.0.0.1
baseurl: "" # does not include hostname
show_dir_listing: false

# Outputting
permalink:     date
paginate_path: /page:num
timezone:      null

quiet:    false
verbose:  false
defaults: []

liquid:
  error_mode: warn

# Markdown Processors
rdiscount:
  extensions: []

redcarpet:
  extensions: []

kramdown:
  auto_ids:       true
  footnote_nr:    1
  entity_output:  as_char
  toc_levels:     1..6
  smart_quotes:   lsquo,rsquo,ldquo,rdquo
  input:          GFM
  hard_wrap:      false
  footnote_nr:    1
</code></pre>
</div>

<h4 id="front-matter">Front Matter</h4>

<p>Jekyll 整个站点的配置是站点根目录下的 <code class="highlighter-rouge">_config.yml</code> 文件，而 <code class="highlighter-rouge">_layout</code>, <code class="highlighter-rouge">_posts</code> 等目录下的文件中也可以有自己的变量。文件头部的 <code class="highlighter-rouge">yaml</code> 配置被称作 Front Matter。</p>

<h4 id="front-matter-">Front Matter 默认值</h4>

<p>可以使用 <code class="highlighter-rouge">defaults</code> 设置一个路径下 Front Matter 默认值。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>defaults:
  - scope:
      path: ""
      type: weekly
    values:
      layout: weekly
      title: 技术周刊
</code></pre>
</div>

<h4 id="section-5">忽略文件</h4>

<p><code class="highlighter-rouge">exclude</code> 用于忽略文件或文件夹，其中 <code class="highlighter-rouge">_config.yml</code> 和以<code class="highlighter-rouge">.</code>开头的文件或文件夹都会被自动忽略。后续版本，<code class="highlighter-rouge">node_modules</code> 等文件夹也被隐式忽略了（参考 _config.yml 章节）。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>exclude:
  - Gemfile
  - Gemfile.lock
  - README.md
  - LICENSE
</code></pre>
</div>

<h4 id="section-6">分页</h4>

<p>Jekyll 没有内置分页功能，而是提供了一个分页插件 <code class="highlighter-rouge">jekyll-paginate</code>。<code class="highlighter-rouge">jekyll-paginate</code> 仅在特定的默认条件下生效，如果你对网站结构有自己的一套，<code class="highlighter-rouge">jekyll-paginate</code> 可能是无法满足需求的。</p>

<p>限制如下：</p>

<ul>
  <li>分页功能必须在 HTML 格式文件中调用，如：<code class="highlighter-rouge">index.html</code></li>
  <li>必须使用默认的链接格式 <code class="highlighter-rouge">permalink</code></li>
</ul>

<p>如果想继续使用，请详细阅读 <a href="http://jekyllrb.com/docs/pagination/">http://jekyllrb.com/docs/pagination/</a>。这是一个复杂的问题！</p>

<h4 id="section-7">文章摘要</h4>

<p>Jekyll 提供了文章摘要摘取功能，通过 <code class="highlighter-rouge">post.excerpt</code> 就可以获得摘要内容。</p>

<p>我们也可以设置摘取摘要的分隔符：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>excerpt_separator: &lt;!--more--&gt;
</code></pre>
</div>

<h4 id="section-8">评论</h4>

<p>由于是静态站点，我们没发内建评论系统，因此需要引入一些纯前端就可以使用的评论系统。国外推荐：<a href="https://disqus.com/">disqus</a>，国内推荐：<a href="http://duoshuo.com/">duoshuo</a>。</p>

<h4 id="page">Page</h4>

<p>可以认为，不在 <code class="highlighter-rouge">_post</code> 目录下的页面都是 Page 而不是 Post，其它方面区别不大。</p>

<h4 id="collection">Collection</h4>

<p>并不是每个页面都是独立“页面”和以日期为顺序的“博文”，因此 Jekyll 引入了 Collection。Collection 可以根据路径定义一类具有相同属性的页面集合。Collection 也可以通过 Front Matter 设定默认值。</p>

<h4 id="data">Data</h4>

<p>Data 相当于动态页面中的数据库，Jekyll Data 支持 <code class="highlighter-rouge">yaml</code>, <code class="highlighter-rouge">json</code>, <code class="highlighter-rouge">CSV</code> 三种格式，可以通过 <code class="highlighter-rouge">site.data</code> 直接访问。</p>

<p>例如：</p>

<p>团队成员有 Fa, Li, Zhang 三人，于是我们在默认路径 <code class="highlighter-rouge">_data</code> 创建一个数据文件 <code class="highlighter-rouge">member.yml</code>：</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Fa</span>
<span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Li</span>
<span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Zhang</span>
</code></pre>
</div>

<p>在页面中显示团队成员列表：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">member</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">site.data.member</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="err">&lt;ul&gt;</span><span class="w">
  </span><span class="err">&lt;li&gt;</span><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">member.name</span><span class="w"> </span><span class="p">}</span><span class="err">}&lt;/li&gt;</span><span class="w">
</span><span class="err">&lt;/ul&gt;</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endfor</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="liquid-">Liquid 模板</h2>

<h4 id="liquid">什么是 Liquid?</h4>

<p>Liquid 是一个开源模版语言，由电商公司 Shopify 实现，用 Ruby 编写。Shopify 自己使用 Liquid 来构建自己电商网站模板生态。</p>

<p>详细文档请参考 <a href="https://shopify.github.io/liquid/">https://shopify.github.io/liquid/</a>。</p>

<p>Jekyll 实用 Liquid 作为模版引擎，构建页面。</p>

<h4 id="section-9">变量</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;title&gt;
{{ page.title }}
&lt;/title&gt;
</code></pre>
</div>

<p>其中，Jekyll 预设了 <code class="highlighter-rouge">site</code>, <code class="highlighter-rouge">layout</code>, <code class="highlighter-rouge">page</code>, <code class="highlighter-rouge">content</code> 四个全局变量。</p>

<h4 id="section-10">逻辑判断</h4>

<p>Liquid 的逻辑判断跟 Ruby 完全一致。</p>

<ul>
  <li>常见语言中的 <code class="highlighter-rouge">if</code>, <code class="highlighter-rouge">else if</code>, <code class="highlighter-rouge">else</code> 在 Liquid 中的对应是 <code class="highlighter-rouge">if</code>, <code class="highlighter-rouge">elsif</code>, <code class="highlighter-rouge">else</code>。同时，Liquid 也可以使用 Ruby 特有的 <code class="highlighter-rouge">unless</code>。</li>
  <li>常见语言中的 <code class="highlighter-rouge">switch</code>, <code class="highlighter-rouge">case</code> 在 Liquid 中的对应是 <code class="highlighter-rouge">case</code>, <code class="highlighter-rouge">when</code>。</li>
</ul>

<p>为了简单，只以 <code class="highlighter-rouge">if</code> 为例：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">page.disable_syntax_highlight</span><span class="w"> </span><span class="err">!=</span><span class="w"> </span><span class="err">true</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="err">&lt;link</span><span class="w"> </span><span class="err">rel=</span><span class="s2">"stylesheet"</span><span class="w"> </span><span class="err">href=</span><span class="s2">"{{ site.assets }}/css/zenburn.css"</span><span class="err">&gt;</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endif</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="section-11">遍历</h4>

<p>在 Liquid 中可以通过 <code class="highlighter-rouge">for</code> <code class="highlighter-rouge">in</code> 语法遍历数组，并且支持一般语言循环中的 <code class="highlighter-rouge">continue</code> 和 <code class="highlighter-rouge">break</code>。</p>

<p>除此之外，还可以使用 <code class="highlighter-rouge">offset</code> 和 <code class="highlighter-rouge">limit</code> 控制遍历范围，通过 <code class="highlighter-rouge">reversed</code> 进行倒序。</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">post</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">site.posts</span><span class="w"> </span><span class="err">reversed</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="err">&lt;a</span><span class="w"> </span><span class="err">href=</span><span class="s2">"{{ post.permalink }}"</span><span class="err">&gt;</span><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">post.title</span><span class="w"> </span><span class="p">}</span><span class="err">}&lt;/a&gt;</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endfor</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>详见 <a href="https://shopify.github.io/liquid/tags/iteration/">https://shopify.github.io/liquid/tags/iteration/</a></p>

<h4 id="section-12">赋值</h4>

<p>使用 <code class="highlighter-rouge">assign</code> 进行赋值：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">my_variable</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>使用 <code class="highlighter-rouge">capture</code> 进行捕捉赋值：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">my_variable</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="err">I</span><span class="w"> </span><span class="err">am</span><span class="w"> </span><span class="err">being</span><span class="w"> </span><span class="err">captured.</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="liquid-filters">Liquid Filters</h4>

<p>Liquid Filters 是一种针对 Liquid 中变量的过滤器，语法是：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">var</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">filter:</span><span class="w"> </span><span class="nt">"param"</span><span class="w"> </span><span class="err">}}</span><span class="w">
</span></code></pre>
</div>

<p>除去 Liquid 自身丰富的过滤器之外，Jekyll 还额外扩展了一些实用的：</p>

<ul>
  <li><code class="highlighter-rouge">cgi_escape</code> <code class="highlighter-rouge">url_escape</code> <code class="highlighter-rouge">xml_escape</code>
    <ul>
      <li>对变量进行相应的 escape</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">markdownify</code> <code class="highlighter-rouge">scssify</code> <code class="highlighter-rouge">sassify</code> <code class="highlighter-rouge">jsonify</code>
    <ul>
      <li>对变量内容的格式转换</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">where</code> <code class="highlighter-rouge">where_exp</code> <code class="highlighter-rouge">group_by</code> <code class="highlighter-rouge">sort</code>
    <ul>
      <li>对变量数据的查询排序等操作</li>
    </ul>
  </li>
</ul>

<p>详见 <a href="http://jekyllrb.com/docs/templates/#filters">http://jekyllrb.com/docs/templates/#filters</a></p>

<h2 id="section-13">插件</h2>

<h4 id="section-14">插件简介</h4>

<p>Jekyll 支持使用插件进行扩展，插件的类型分为：Generators、Converters、Commands、Hooks、Liquid Tag、Liquid Filter 等。</p>

<p>如果希望开发插件，请参考 <a href="http://jekyllrb.com/docs/plugins/">http://jekyllrb.com/docs/plugins/</a></p>

<h4 id="section-15">使用插件</h4>

<ol>
  <li>
    <p>基于 Gem 的方式</p>

    <p>对于已经发布到 RubyGems 的插件，推荐使用这种方式。只需要在 <code class="highlighter-rouge">_config.yml</code> 中 <code class="highlighter-rouge">gems</code> 字段加入相应插件名称即可。</p>
  </li>
  <li>
    <p>基于本地文件</p>

    <p>对于没有发布的插件，可以在 <code class="highlighter-rouge">_plugins</code> 文件夹中直接引入 <code class="highlighter-rouge">*.rb</code> Ruby 源文件。</p>
  </li>
</ol>

<h2 id="section-16">常用插件</h2>

<h4 id="jekyll-watch">Jekyll Watch</h4>

<p>Jekyll “必备”的插件，因为这是 Jekyll 程序的依赖，只是因为程序结构设计被剥离成了插件。它在本地预览时，提供文件变更的自动更新，让我们每次刷新都能自动看到最新的内容。</p>

<p>Jekyll Watch 是自动开启的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll serve --watch
</code></pre>
</div>

<h4 id="jekyll-compose">Jekyll Compose</h4>

<p>安装了 <a href="https://github.com/jekyll/jekyll-compose">Jekyll Compose</a> 后，Jekyll 会额外提供一些命令，便于发布管理博文。</p>

<p>创建草稿：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll draft
</code></pre>
</div>

<p>创建新博客：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll post
</code></pre>
</div>

<p>创建新博客：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll page
</code></pre>
</div>

<p>发布草稿：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll publish
</code></pre>
</div>

<p>撤销发布：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jekyll unpublish
</code></pre>
</div>

<h4 id="jekyll-admin">Jekyll Admin</h4>

<p><a href="https://github.com/jekyll/jekyll-admin">Jekyll Admin</a> 是一个 CMS 风格的图形化后台管理插件，可以在本地给用户提供服务。</p>

<p><img src="https://github.com/jekyll/jekyll-admin/raw/master/screenshot.png" alt="" /></p>

<h4 id="jekyll-seo-tag">Jekyll SEO Tag</h4>

<p><a href="https://github.com/jekyll/jekyll-seo-tag">Jekyll SEO Tag</a> 帮你生成一大堆 Meta 标签。</p>

<h4 id="jemoji">Jemoji</h4>

<p>你可以通过 <a href="https://github.com/jekyll/jemoji">Jemoji</a> 在 Jekyll 生成的网站中，加入自己 Emoji 表情。</p>

<p>Emoji 语法采用 GitHub 的语法风格。</p>

<h4 id="jekyll-mentions">Jekyll Mentions</h4>

<p><a href="https://github.com/jekyll/jekyll-mentions">Jekyll Mentions</a> 允许你在文章中直接“@” GitHub 或其它网站用户。</p>

<h4 id="jekyll-feed">Jekyll Feed</h4>

<p>你可以通过 <a href="https://github.com/jekyll/jekyll-feed">Jekyll Feed</a> 在 Jekyll 生成的网站中，生成 RSS 源。</p>

<h4 id="jekyll-import">Jekyll Import</h4>

<p><a href="https://github.com/jekyll/jekyll-import">Jekyll Import</a> 支持从一些国外的主流站点导入博文，如 Blogger, WordPress 和 Tumblr 等，同样也支持 RSS 和 CSV 等数据格式导入。</p>

<h4 id="jekyll-archives">Jekyll Archives</h4>

<p><a href="https://github.com/jekyll/jekyll-archives">Jekyll Archives</a> 用于生成带标签和分类的『存档』页面。</p>

<h4 id="jekyll-redirect-from">Jekyll Redirect From</h4>

<p><a href="https://github.com/jekyll/jekyll-redirect-from">Jekyll Redirect From</a> 提供页面跳转功能，比较简单，也可以自行通过 JavaScript 实现。</p>

<h2 id="github-pages">GitHub Pages</h2>

<h4 id="section-17">创建个人主页</h4>

<p>创建一个名为 <code class="highlighter-rouge">your-github-username.github.io</code> 的 Repo，<code class="highlighter-rouge">your-github-username</code> 是你的用户名。</p>

<p>只需在 Repo 中设置 GitHub Pages 的 Source，就可以开启 GitHub Pages，支持 <code class="highlighter-rouge">master</code>, <code class="highlighter-rouge">gh-pages</code>, <code class="highlighter-rouge">master</code> 中 <code class="highlighter-rouge">/docs</code> 文件夹三种 Source。</p>

<p><img src="/image/github-pages-source.jpg" alt="" /></p>

<h4 id="github-pages-">在 GitHub Pages 只可以使用部分插件</h4>

<p>由于安全性等原因的考虑，在 GitHub Pages 平台上只能使用白名单中的 7 个 Jekyll 插件。它们分别是：Jekyll Sitemap, Jekyll SEO Tag, github-metadata, Jekyll Feed, Jekyll Redirect From, Jemoji 和 Jekyll Mentions。</p>

<p>详见 <a href="https://help.github.com/articles/adding-jekyll-plugins-to-a-github-pages-site/">https://help.github.com/articles/adding-jekyll-plugins-to-a-github-pages-site/</a>。</p>

<h4 id="github-pages--jekyll--kramdown">GitHub Pages 上的 Jekyll 只支持 kramdown</h4>

<p>从 2016 年 5 月 1 日起，GitHub Pages 只支持 kramdown 作为 Markdown 引擎。</p>

<p>详见 <a href="https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0">https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0</a>。</p>

<h4 id="nojekyll--jekyll-">在根目录下创建 <code class="highlighter-rouge">.nojekyll</code> 文件可以跳过 Jekyll 解析</h4>

<p>GitHub Pages 支持 Jekyll 或者原始文件。最初 GitHub Pages 只支持 Jekyll，后来 GitHub 允许在 Repo 根目录下添加 <code class="highlighter-rouge">.nojekyll</code> 跳过解析。</p>

<p>详见 <a href="https://github.com/blog/572-bypassing-jekyll-on-github-pages">https://github.com/blog/572-bypassing-jekyll-on-github-pages</a>。</p>

<h4 id="section-18">你可以使用自己的域名</h4>

<p>在 Source 的根路径下，创建 <code class="highlighter-rouge">CNAME</code> 写入域名，然后把 DNS 解析到 GitHub Pages 的 IP：<code class="highlighter-rouge">192.30.252.153</code>和<code class="highlighter-rouge">192.30.252.154</code>。</p>

<p>详见 <a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">https://help.github.com/articles/using-a-custom-domain-with-github-pages/</a></p>

<h4 id="section-19">你也可以为账号下任意项目创建独立的项目页面</h4>

<p>任何一个项目的 Repo，都可以开启这个项目的 GitHub Pages。开启方式同个人主页。</p>

<p>如项目：<a href="https://github.com/crispgm/gsm">crispgm/gsm</a>，设置完成后，就可以通过 <a href="https://crispgm.github.io/gsm/">https://crispgm.github.io/gsm/</a> 进行访问。</p>

<h4 id="sitegithub--repo-">你可以通过 <code class="highlighter-rouge">site.github</code> 获得 Repo 的信息</h4>

<p>由上面所说的 <a href="https://github.com/jekyll/github-metadata">github-metadata</a> 提供服务，通过 GitHub API 获取 Repo 的信息。当然，在本地环境下，也可以通过手动安装 github-metadata 来使用。</p>

<h4 id="repo--github-pages">私有 Repo 也可以开启 GitHub Pages</h4>

<p>GitHub 的付费用户建立的私有项目 Private Repo，也可以开启 GitHub Pages。</p>

<h4 id="github-pages--gh-pages-">GitHub Pages 无法在使用 <code class="highlighter-rouge">gh-pages</code> 分支作为源的情况下关闭</h4>

<p>有些奇怪的设定，真想关闭直接删除掉，在 Source 选择 None 就好。</p>

<h2 id="section-20">最后</h2>

<h4 id="jekyll-">本博客也是用 Jekyll 生成的</h4>

<p>Happy Jekylling!</p>

  </div>
  
  <hr>
  <div class="article-tag">
    
    <div class="tag-item">
    jekyll
    </div>
    
    <div class="tag-item">
    tips
    </div>
    
  </div>
  
  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

      </div>
    </div>
        <footer>
      <div class="content-wrapper" id="contact">
        <div id="links">
          <a href="mailto:crispgm@gmail.com"><i class="fa fa-envelope-o"></i></a>
          <a href="/feed.xml"><i class="fa fa-rss"></i></a>
          <a href="https://github.com/crispgm"><i class="fa fa-github"></i></a>
          <a href="https://stackoverflow.com/users/6858150/david-zhang/"><i class="fa fa-stack-overflow"></i></a>
          <a href="https://instagram.com/crispgm"><i class="fa fa-instagram"></i></a>
          <a href="https://twitter.com/crispgm"><i class="fa fa-twitter"></i></a>
          <a href="http://medium.com/@crispgm"><i class="fa fa-medium"></i></a>
          <a href="https://www.linkedin.com/in/wanlong-zhang"><i class="fa fa-linkedin"></i></a>
        </div>

        <div id="copyright">
          David Zhang &copy; 2017
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        isToggle = false;

        document.body.addEventListener("click", function(evt){
          if (isToggle && evt.target.id != 'dropdown-button') {
            toggleMenu();
          }
        });

        var dropdown = document.querySelector("#dropdown-button");
        dropdown.addEventListener("click", function(evt) {
          toggleMenu();
        });

        document.body.addEventListener("touchstart", function(evt){
          evt.stopPropagation();
        });
      }, false);

      function toggleMenu() {
        var menuElement = document.querySelector(".menu-links");
        var dropdownElement = document.querySelector("#dropdown-button");
        if (isToggle) {
          menuElement.classList.remove("menu-dropdown");
          menuElement.classList.remove("animated");
          menuElement.classList.remove("fadeIn");
          dropdownElement.classList.remove("fa-close");
          dropdownElement.classList.remove("fa-inverse");
          dropdownElement.classList.add("fa-bars");
        }
        else {
          menuElement.classList.add("menu-dropdown");
          menuElement.classList.add("animated");
          menuElement.classList.add("fadeIn");
          dropdownElement.classList.remove("fa-bars");
          dropdownElement.classList.add("fa-close");
          dropdownElement.classList.add("fa-inverse");
        }
        isToggle = !isToggle;
      }
    </script>
    
    <script src="/assets/scripts/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-50708664-1', 'auto');
      ga('send', 'pageview');
    </script>
    
    <script>
    var disqus_config = function () {
      this.page.identifier = '/page/48-tips-for-jekyll-you-should-know.html';
    };
    
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://crispgm.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    
  </body>
</html>