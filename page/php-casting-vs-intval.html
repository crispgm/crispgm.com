<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>[翻译]PHP: int(强制转换) vs. intval() - Crisp Blog</title>
<link rel="stylesheet" href="http://crispgm.com/style/style.css">
<link rel="stylesheet" href="http://crispgm.com/style/vs.css">
<link rel="stylesheet" href="http://crispgm.com/style/opensans.css">
<script src="http://crispgm.com/script/highlight.pack.js"></script>
<script src="http://crispgm.com/script/jquery-2.0.3.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="menu">
    <div id="menu_home">
        <a href="http://crispgm.com/">Crisp Blog</a>
    </div>
    <div id="menu_link">
        <a href="http://github.com/crispgm">Github</a>&nbsp;
        <a href="http://crispgm.com/page/about.html">About</a>
    </div>
</div>
<div id="container">

<div class="article"><div class="article_head"><div class="article_title">[翻译]PHP: int(强制转换) vs. intval()</div>
<div class="article_date">2014/09/03</div>
</div><div class="article_main"><h3>原文信息</h3>
<p>Original Page: </p>
<blockquote>
<p><a href="http://hakre.wordpress.com/2010/05/13/php-casting-vs-intval">PHP: Casting vs. intval()</a></p>
<p>By <strong>Hakre</strong>, <a href="http://hakre.wordpress.com">hakre.wordpress.com</a>  </p>
<p>May 13th, 2010</p>
</blockquote>
<h3>正文</h3>
<p>在PHP中，使用<code>(int)$var</code>方式进行类型转换比使用<code>intval($var)</code>函数方式快400%到650%。</p>
<h4>运行测试</h4>
<p>(int)$val vs. intval($val) 速度对比[测试 #1]</p>
<table>
<thead>
<tr>
<th>#</th>
<th>INPUT</th>
<th>(INT)$val</th>
<th>INTVAL($val)</th>
<th>RATIO</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.068180</td>
<td>/ 0.448819</td>
<td>658%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.067972</td>
<td>/ 0.448907</td>
<td>660%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.072348</td>
<td>/ 0.450288</td>
<td>622%</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.087305</td>
<td>/ 0.469350</td>
<td>537%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.087590</td>
<td>/ 0.471153</td>
<td>537%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.089154</td>
<td>/ 0.469826</td>
<td>526%</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 0.068234</td>
<td>/ 0.451035</td>
<td>661%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.089344</td>
<td>/ 0.470391</td>
<td>526%</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 0.072989</td>
<td>/ 0.451909</td>
<td>619%</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.088196</td>
<td>/ 0.469347</td>
<td>532%</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 0.068378</td>
<td>/ 0.449884</td>
<td>657%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.068770</td>
<td>/ 0.449416</td>
<td>653%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.068927</td>
<td>/ 0.448028</td>
<td>650%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.072599</td>
<td>/ 0.450618</td>
<td>620%</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0.086305</td>
<td>/ 0.467347</td>
<td>541%</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.102120</td>
<td>/ 0.484245</td>
<td>474%</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0.092310</td>
<td>/ 0.472185</td>
<td>511%</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 0.112644</td>
<td>/ 0.494482</td>
<td>438%</td>
</tr>
</tbody>
</table>
<p>(int)$val vs. intval($val) 速度对比[测试 #2]</p>
<table>
<thead>
<tr>
<th>#</th>
<th>INPUT</th>
<th>(INT)$val</th>
<th>INTVAL($val)</th>
<th>RATIO</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.045576</td>
<td>/ 0.194759</td>
<td>427%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.042457</td>
<td>/ 0.194273</td>
<td>457%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.047853</td>
<td>/ 0.196049</td>
<td>409%</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.055792</td>
<td>/ 0.209531</td>
<td>375%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.055158</td>
<td>/ 0.208236</td>
<td>377%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.056604</td>
<td>/ 0.209486</td>
<td>370%</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 0.042580</td>
<td>/ 0.194606</td>
<td>457%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.056834</td>
<td>/ 0.209276</td>
<td>368%</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 0.045320</td>
<td>/ 0.196626</td>
<td>433%</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.054923</td>
<td>/ 0.209295</td>
<td>381%</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 0.042582</td>
<td>/ 0.195295</td>
<td>458%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.042673</td>
<td>/ 0.194469</td>
<td>455%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.042560</td>
<td>/ 0.194363</td>
<td>456%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.045553</td>
<td>/ 0.197149</td>
<td>432%</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0.054069</td>
<td>/ 0.206131</td>
<td>381%</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.066170</td>
<td>/ 0.218996</td>
<td>330%</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0.057587</td>
<td>/ 0.210010</td>
<td>364%</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 0.071908</td>
<td>/ 0.224338</td>
<td>311%</td>
</tr>
</tbody>
</table>
<p>这组测试每个项目进行了100000次。两个测试都在windows上运行。第一个使用的是PHP 5.2.8</p>
<h4>intval()和int的结果对比</h4>
<p>(待续)</p>
<h4>结论</h4>
<p>使用(int)类型转换，便捷而且没有负面效果。
事实上，它在速度快的同时，还和intval()函数有完全一样的结果。
两者甚至还会有同样的warning信息。</p></div>
</div>    <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    
    var disqus_shortname = 'crispgm'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50708664-1', 'crispgm.com');
ga('send', 'pageview');
</script>
<div>
<footer>
	Copyright &copy; Crisp, 2014.
</footer>
</div>
</body>
</html>

