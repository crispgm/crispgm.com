<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>David Zhang</title>
    <description>A minimalist programmer, photographer, and lifehacker. Blog, project, wiki, and about.</description>
    <link>https://crispgm.com/</link>
    <atom:link href="https://crispgm.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 01 Jan 2018 00:57:20 +0800</pubDate>
    <lastBuildDate>Mon, 01 Jan 2018 00:57:20 +0800</lastBuildDate>
    <generator>Jekyll v3.5.2</generator>
    
      
      <item>
        <title>高斯速算法和微小的优化</title>
        <description>&lt;p&gt;今天在阅读 Linus Torvalds 的自传《Just for Fun》时（或者说是重温，因为大学时粗略的看过一遍），Linus 在书中提到了1加到100的高斯速算法。作为擅长中小学数学的中国人应该都很清楚这个是什么，我就不在此介绍了。&lt;/p&gt;

&lt;p&gt;在书中他主要表达的是对故事真实性的一些质疑，因为他认为：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;伟大的数学家不会采用既繁琐又无趣的方法解决问题，因为他们能理解问题背后的真正内涵，并且利用这个内涵找到更为简便的方法，从而得到答案。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;容易走神的我，于是就在想：对于用笔算的小学生们，Bruteforce 意味着从1加到100，在很细心不出现低级失误的前提下，我想花个20分钟还是必要的。而对于掌握了高斯速算法的人来说，顶多10秒钟。这之间差了千倍。&lt;/p&gt;

&lt;p&gt;那对于计算能力已经经历了几十年摩尔定律发展的情况下，高斯速算法和“无脑”的 Bruteforce 循环之间能差到多少？&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'benchmark/ips'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gaussian_add_to_100&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bruteforce_add_to_100&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Benchmark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ips&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'gaussian add to 100'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gaussian_add_to_100&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'brute force add to 100'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bruteforce_add_to_100&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compare!&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;好奇的我，写了一段简单的 Ruby benchmark 程序。结果是：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-plain&quot;&gt;Warming up --------------------------------------
 gaussian add to 100   157.824k i/100ms
brute force add to 100
                        11.804k i/100ms
Calculating -------------------------------------
 gaussian add to 100      5.103M (±12.3%) i/s -     25.094M in   5.003086s
brute force add to 100
                        140.711k (± 7.9%) i/s -    708.240k in   5.065663s

Comparison:
 gaussian add to 100:  5102771.3 i/s
brute force add to 100:   140711.1 i/s - 36.26x  slower
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;相差了足足36倍。&lt;/p&gt;

&lt;p&gt;产品开发中，我们往往会抱怨，程序“简单”到不用让你把链表拼来接去、不需要让你折腾二叉树。但我们真正把事情做好了吗？这些小小的优化并非微不足道。&lt;/p&gt;
</description>
        <pubDate>Tue, 05 Dec 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/gaussian-summation.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/gaussian-summation.html</guid>
        
        
      </item>
      
    
      
      <item>
        <title>ASMR, 白噪声的绝佳选择</title>
        <description>&lt;p&gt;白噪声是一个信号处理的定义，但在本文中指的是稳定、平和的声音，过滤真正的噪音，可以让人更专注，或者是让人放松、安眠。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;In signal processing, white noise is a random signal having equal intensity at different frequencies, giving it a constant power spectral density. &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;初中时，我曾经用过《新概念英语》录音带作为白噪声，一边写作业一边听。由于当时记忆还不错，听过的都基本背下来了。&lt;/p&gt;

&lt;p&gt;后来，我开始听古典音乐，发现了 RTHK Radio 4（香港电台第四台）。它会全天播放古典音乐，整点插播英语新闻，一举两得成为了白噪声的新选择。&lt;/p&gt;

&lt;p&gt;高中之后，随着学习压力的增大和个人的浮躁，终于算是和普通人一样，开始听流行歌曲。流行歌曲的确能起到白噪声的一些作用，比如屏蔽噪音。但缺点也颇为明显，容易烦躁和容易腻。&lt;/p&gt;

&lt;p&gt;我开始了解到一些新的白噪声，比如 Noizio 这类应用。它会通过软件发出不间断的自然环境白噪声，如：下雨声、火车声、流水声，甚至还有咖啡馆吵闹声。这类白噪声更佳纯粹，但可能是过于单一的原因，还是容易腻。&lt;/p&gt;

&lt;p&gt;偶尔的机会，了解到一种叫 ASMR 视频的东西。经过了几年的体验，我想这是一种绝佳的白噪声。&lt;/p&gt;

&lt;h3 id=&quot;什么是-asmr&quot;&gt;什么是 ASMR&lt;/h3&gt;

&lt;p&gt;ASMR 是英文 Autonomous Sensory Meridian Response，自发知觉经络反应。正因为这个名字很拗口，但 ASMR 会有很多标题党级别的名字，毕竟现在的人都想“搞个大新闻”，比如说「颅内高潮」。&lt;/p&gt;

&lt;p&gt;其实 ASMR 并没有所谓高潮，而只是舒适，通过声音和接触使得人感觉到非常舒适的一种方式。&lt;/p&gt;

&lt;p&gt;ASMR 不是每个人都能体会，但能体会到的人遇到下面这些场景一定会能领会。&lt;/p&gt;

&lt;p&gt;场景：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;微风吹过，感到皮肤和人都很舒服&lt;/li&gt;
  &lt;li&gt;理发店剪头发，感觉头皮发麻，很舒服&lt;/li&gt;
  &lt;li&gt;在耳边说话，让人起鸡皮疙瘩&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;而 ASMR 视频/音频就是专门故意制造这些场景，来让观众和听众获得舒适的感觉。由于无法肢体接触，主要通过声音方式进行感官刺激。&lt;/p&gt;

&lt;p&gt;ASMR 和冥想（Meditation）有些相似之处。&lt;/p&gt;

&lt;h3 id=&quot;器材&quot;&gt;器材&lt;/h3&gt;

&lt;p&gt;ASMR 有一些专业的器材，最常见的就是 &lt;a href=&quot;https://3diosound.com/&quot;&gt;3Dio&lt;/a&gt; 仿生麦克风，麦克风的输入是两支“耳朵”。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/3dio-free-space.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;内容&quot;&gt;内容&lt;/h3&gt;

&lt;p&gt;ASMR 主要分为纯音频和视频。&lt;/p&gt;

&lt;p&gt;纯音频部分主要分为言语刺激和声音刺激。&lt;/p&gt;

&lt;p&gt;言语部分对主播要求较高，需要很轻声的说话，并且跟语言种类也有关系。比如，国内知名主播 MT 就表示对韩语的 ASMR 音频毫无感觉，对欧美语系则反应较强。&lt;/p&gt;

&lt;p&gt;声音刺激相对粗暴一些，比如摩擦声、敲打声、火焰燃烧声，道具包括泡沫、包装盒、火柴等。还有一些“暴力”神器：跳跳糖、芦荟胶等。&lt;/p&gt;

&lt;p&gt;视频的主要因素也是音频部分，但视频中也会通过引导和制造气氛，达到更强的效果。&lt;/p&gt;

&lt;h3 id=&quot;直播&quot;&gt;直播&lt;/h3&gt;

&lt;p&gt;随着 ASMR 的流行，ASMR 主题的直播也不断涌现。毕竟，这是一项不用怎么说话，光看颜就能火的直播方式。主播不必当个段子手，不用有事没事谢谢各位老板送飞机。&lt;/p&gt;

&lt;h3 id=&quot;色情&quot;&gt;色情?&lt;/h3&gt;

&lt;p&gt;ASMR 和色情并没有任何直接关系，当然主播做色情主题的 ASMR 也是可以的。ASMR 的“技术含量”并非很高，所以靠色情作为差异化就成了一个选项。之前国内几个知名主播就因为“擦边球” ASMR 主播玷污了 ASMR 的名声而表示了自己的愤怒和无奈。&lt;/p&gt;

&lt;p&gt;硬色情在国内当然是被禁止的，但在更加开放的 YouTube 上，的确有所谓的「色情」ASMR（Erotic ASMR）。&lt;/p&gt;

&lt;p&gt;总之，ASMR 中有人搞色情，但和 ASMR 是色情没有必然联系。&lt;/p&gt;

&lt;h3 id=&quot;音声&quot;&gt;音声&lt;/h3&gt;

&lt;p&gt;与 ASMR 有些相似的一种音频作品是音声，音声就是用声音演一个主题小故事。按这样分类，部分有故事情节的 ASMR 音频属于音声。然后，带有 ASMR 效果的音声作品也属于 ASMR 音频。&lt;/p&gt;

&lt;p&gt;与之相似的还有配乐诗朗诵什么的。&lt;/p&gt;

&lt;p&gt;国内有不少 ASMR 主播都有音声作品，比如后面会推荐的番茄。&lt;/p&gt;

&lt;h3 id=&quot;绝佳白噪声&quot;&gt;绝佳白噪声&lt;/h3&gt;

&lt;p&gt;科普了好久，终于到了主题环节——ASMR 是绝佳的白噪声：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ASMR 能屏蔽噪音（可能需要借助耳麦的隔音能力）&lt;/li&gt;
  &lt;li&gt;ASMR 内容不会被大脑解析（言语部分可能要视情况而定）&lt;/li&gt;
  &lt;li&gt;ASMR 内容相对自然白噪声，丰富程度高，不容易腻&lt;/li&gt;
  &lt;li&gt;ASMR 让人更平静舒适，专注于在做的事情&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;写代码时，可以听着 ASMR，让工作更轻松；中午午休的时候，可以用 ASMR 提高午休效率；晚上睡前，用 ASMR 将自己从娱乐活动中脱离出来。&lt;/p&gt;

&lt;h3 id=&quot;收听技巧&quot;&gt;收听技巧&lt;/h3&gt;

&lt;p&gt;首先，就是要保持环境安静，最好带能罩住耳朵的耳机。&lt;/p&gt;

&lt;p&gt;长期听会产生惰性，感觉不那么强烈。可以隔段时间，take a break。&lt;/p&gt;

&lt;p&gt;有一些小技巧，比如说让自己变冷可以让刺激更强烈。&lt;/p&gt;

&lt;h3 id=&quot;主播推荐&quot;&gt;主播推荐&lt;/h3&gt;

&lt;h4 id=&quot;国内&quot;&gt;国内&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;MT&lt;/strong&gt; 最早接触 ASMR 知道的国内主播，国内少数主要靠言语的声音起效的主播（泡腾片、跳跳糖之类属于暴力 ASMR，难度不高）。重庆妹子和 WoW 玩家，ASMR 和英语水平都很高。投稿类视频质量很高，情节丰富，推荐观看。&lt;br /&gt;
&lt;a href=&quot;https://space.bilibili.com/6881318/#!/&quot;&gt;Bilibili&lt;/a&gt; &lt;a href=&quot;http://yy.duowan.com/69571171&quot;&gt;YY直播&lt;/a&gt; &lt;a href=&quot;http://music.163.com/#/djradio?id=6621032&quot;&gt;网易云音乐&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;番茄&lt;/strong&gt; 开了线下体验店。除了 ASMR，&lt;del&gt;三观不正&lt;/del&gt;的音声作品特别多。&lt;br /&gt;
&lt;a href=&quot;https://space.bilibili.com/1894748/#!/&quot;&gt;Bilibili&lt;/a&gt; &lt;a href=&quot;http://music.163.com/#/djradio?id=6792053&quot;&gt;网易云音乐&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;少寒&lt;/strong&gt; 会出 Cosplay 直播，直播劳模（尤其是在 MT 签约 YY 之前）。&lt;br /&gt;
&lt;a href=&quot;https://space.bilibili.com/373240/#!/&quot;&gt;Bilibili&lt;/a&gt; &lt;a href=&quot;http://yy.duowan.com/13739310&quot;&gt;YY直播&lt;/a&gt; &lt;a href=&quot;http://music.163.com/#/djradio?id=345640053&quot;&gt;网易云音乐&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;丧妹&lt;/strong&gt; 以上三人均退出了B站直播，但优质主播还是层出不穷，比如这位漂亮的江苏妹子。&lt;br /&gt;
&lt;a href=&quot;https://space.bilibili.com/4548018/#!/&quot;&gt;Bilibili&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;锦衣缇骑&lt;/strong&gt; ASMR 搬运工，长期搬运 YouTube 各类外国主播视频，偶尔乱入有声小说。&lt;br /&gt;
&lt;a href=&quot;https://space.bilibili.com/689753/#!/&quot;&gt;Bilibili&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;国外&quot;&gt;国外&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Maria&lt;/strong&gt; 世界最知名的 ASMR 女王，俄罗斯裔美国人，曾获得过华盛顿邮报的报道&lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;。风格主要是角色扮演言语较多，英语和俄语都有。&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/user/GentleWhispering&quot;&gt;YouTube&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;德叔&lt;/strong&gt; 居住在澳大利亚黄金海岸的德米特里 Dmitri 大叔，YouTube 上最早的 ASMR 主播之一。也证明了 ASMR 不是只有漂亮妹子才能做。&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/user/MassageASMR&quot;&gt;YouTube&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;PPOMO&lt;/strong&gt; 韩国设计妹子，主要是韩语和日语 ASMR，不露脸。产量很大，而且会在 YouTube 上直播。&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/channel/UCAtFkapSeoEGPxm5bC3tvaw&quot;&gt;YouTube&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;AlmazanKitchen&lt;/strong&gt; 额外推荐的一个 YouTube 频道，这不是专门的 ASMR 视频，它的观看价值更高。作者是塞尔维亚人，在山林泉水间烹饪美食。烹饪过程有一定 ASMR 效果。&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/channel/UCVVAnxQ2YMC_qlc7QfPA2YQ&quot;&gt;YouTube&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;思考&quot;&gt;思考&lt;/h3&gt;

&lt;p&gt;与 ASMR 很相似的冥想已经做成了很大的产业，AppStore 有很多让人们放松、重获活力的 App。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.headspace.com/&quot;&gt;HeadSpace&lt;/a&gt; 就是一家提供这类服务的硅谷创业公司，提供冥想 App 和实体硬件。他们在今年以2.5亿美元的估值获得了3700万美元的融资，投资方是 Spectrum Equity&lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;。随着 ASMR 的不断普及，未来未尝不会有类似的高质量 ASMR 服务产生。让我们拭目以待。&lt;/p&gt;

&lt;p&gt;在办公室里冥想的 HeadSpace 员工们&lt;sup id=&quot;fnref:4&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;:
&lt;img src=&quot;/image/headspace-work.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;White Noise, Wikipedia &lt;a href=&quot;https://www.wikiwand.com/en/White_noise&quot;&gt;https://www.wikiwand.com/en/White_noise&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot;&gt;
      &lt;p&gt;A whisper, then tingles, then 87 million YouTube views: Meet the star of ASMR &lt;a href=&quot;https://www.washingtonpost.com/lifestyle/style/a-whisper-then-tingles-then-87-million-youtube-views-meet-the-star-of-asmr/2014/12/12/0c85d54a-7b33-11e4-b821-503cc7efed9e_story.html?utm_term=.a7393582ae20&quot;&gt;https://www.washingtonpost.com/lifestyle/style/a-whisper-then-tingles-then-87-million-youtube-views-meet-the-star-of-asmr/2014/12/12/0c85d54a-7b33-11e4-b821-503cc7efed9e_story.html?utm_term=.a7393582ae20&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot;&gt;
      &lt;p&gt;Exclusive: Headspace Raises $37 Million to Expand Corporate Partnerships, Create More Content, and Go International &lt;a href=&quot;http://fortune.com/2017/06/30/headspace-funding/&quot;&gt;http://fortune.com/2017/06/30/headspace-funding/&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot;&gt;
      &lt;p&gt;A day in the life at Headspace &lt;a href=&quot;https://headspace.design/a-day-in-the-life-at-headspace-4fb330a415e9&quot;&gt;https://headspace.design/a-day-in-the-life-at-headspace-4fb330a415e9&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 18 Aug 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/asmr-the-best-white-noise.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/asmr-the-best-white-noise.html</guid>
        
        
      </item>
      
    
      
      <item>
        <title>Isomorphic React/Preact with Heroku</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://nbrugby.com/&quot;&gt;Rugby News Board&lt;/a&gt; is the side project mentioned in title, which is a simple news site for Rugby sport in Chinese. I made it because there is no Rugby news site in Chinese and I love Rugby.&lt;/p&gt;

&lt;p&gt;Rugby News Board was &lt;a href=&quot;https://github.com/crispgm/rugby-board&quot;&gt;firstly built&lt;/a&gt; with Rails, with simple news channels. By Rails, I could be able to make prototype within 2 days. I wrote a &lt;code class=&quot;highlighter-rouge&quot;&gt;news&lt;/code&gt; table with ORM and SQLite. It ran on Linode VPS and I did DevOps by myself.&lt;/p&gt;

&lt;h1 id=&quot;heroku&quot;&gt;Heroku&lt;/h1&gt;

&lt;p&gt;Since I read about the article from Unsplash &lt;a href=&quot;https://medium.com/unsplash-unfiltered/scaling-unsplash-with-a-small-team-fbdd55571906&quot;&gt;&lt;em&gt;Scaling Unsplash with a small team&lt;/em&gt;&lt;/a&gt;, I realized that I should emigrate from VPS to PaaS to avoid unnecessary cost for infrastructures. I have kept on &lt;a href=&quot;/page/containerize-my-vps.html&quot;&gt;evaluating containers and other technology&lt;/a&gt; on the VPS but it was neither profitable nor productive to the project.&lt;/p&gt;

&lt;p&gt;As a result, I started to migrate to &lt;a href=&quot;https://heroku.com/&quot;&gt;Heroku&lt;/a&gt;, as I sought for more efficiency, reliability and convenience. The process didn’t take too much effort. The only major change to my Rails app is that the database was &lt;a href=&quot;https://devcenter.heroku.com/articles/sqlite3&quot;&gt;changed into Postgres&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;isomorphic-javascript&quot;&gt;Isomorphic JavaScript&lt;/h1&gt;

&lt;p&gt;Rails is flexible both backend and frontend, with components support for everything, and it is a perfect MVC framework for multiple pages application. However, MVVM
is the future, e.g. React. It is a bit more reasonable, elegant and expressive way to make data reactive than modify DOM with jQuery. &lt;strong&gt;Moreover, I just want to keep on track with modern frontend development&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;By the way, I feel quite strange using CoffeeScript, as part of Rails stacks. Being surrounded by Vanilla JavaScript, EcmaScript of all versions, and TypeScript, I have no interest in learning an unpopular JavaScript replacement, which some dudes said it was dead.&lt;/p&gt;

&lt;p&gt;I tried using React with &lt;a href=&quot;https://github.com/reactjs/react-rails&quot;&gt;react-rails&lt;/a&gt; to build translating system of Rugby names. It is merely based on Rails, and we can use React Component with &lt;code class=&quot;highlighter-rouge&quot;&gt;react_component&lt;/code&gt; tag and simply pass the data (Ruby objects) to the component seamlessly.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;section-item&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%= react_component &quot;RugbyDictQuery&quot;, {title: &quot;Rugby Dictionary&quot;} %&amp;gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;react-rails is a great binding between Rails and React. But the trend is isomorphic React application as frontend and backends serve only APIs. I read some articles and slides from companies use both Rails and React, such as &lt;a href=&quot;https://www.slideshare.net/spikebrehm/the-evolution-of-airbnbs-frontend/&quot;&gt;&lt;em&gt;The Evolution of Airbnb’s Frontend&lt;/em&gt;&lt;/a&gt; and &lt;a href=&quot;https://medium.com/unsplash-unfiltered/scaling-unsplash-with-a-small-team-fbdd55571906&quot;&gt;&lt;em&gt;Scaling Unsplash with a small team&lt;/em&gt;&lt;/a&gt; again.&lt;/p&gt;

&lt;p&gt;They both prefered build isomorphic JavaScript application with Node and React. I followed Unsplash, because we use the same PaaS and frameworks.&lt;/p&gt;

&lt;h2 id=&quot;react-app&quot;&gt;React App&lt;/h2&gt;

&lt;p&gt;Initially, I setup my project with &lt;a href=&quot;https://github.com/verekia/js-stack-from-scratch&quot;&gt;&lt;em&gt;JavaScript Stack from Scratch&lt;/em&gt;&lt;/a&gt;. I won’t post many &lt;a href=&quot;https://github.com/rugby-board/rugby-board-node&quot;&gt;codes&lt;/a&gt; here, since it is routine work with React. The only unfortunate thing is that I forgot to use ESLint from start. In consequence, I had to spend hours fixing 200+ issues.&lt;/p&gt;

&lt;p&gt;However, Webpack is just like a blackbox and I have to do a lot of work to get it done. What I need to do was to specify my entries and outputs with various kinds of loaders and plugins.&lt;/p&gt;

&lt;h2 id=&quot;webpack-with-multiple-entries&quot;&gt;Webpack with Multiple Entries&lt;/h2&gt;

&lt;p&gt;Examples and boilerplates are typically in one HTML form. However, there are two pages in my application. One is &lt;code class=&quot;highlighter-rouge&quot;&gt;index.html&lt;/code&gt; for user requests, the other is &lt;code class=&quot;highlighter-rouge&quot;&gt;admin.html&lt;/code&gt; for editors. Both of them should be equipped with HMR (Hot Module Replacement).&lt;/p&gt;

&lt;p&gt;This article is great as the title &lt;a href=&quot;https://kuzzmi.com/blog/truly-multiple-entries-with-webpack&quot;&gt;&lt;em&gt;Truly Multiple Entries with Webpack&lt;/em&gt;&lt;/a&gt; says.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'path'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'webpack'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HtmlWebpackPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'html-webpack-plugin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'webpack-hot-middleware/client'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'./client/index.jsx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'webpack-hot-middleware/client'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'./client/admin.jsx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// loaders ...&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.jsx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;__dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'..'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'[name]/bundle.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HtmlWebpackPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./client/index.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'index.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'body'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;chunks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'index'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HtmlWebpackPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./client/admin.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'admin.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'body'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;chunks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;HotModuleReplacementPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NoEmitOnErrorsPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;devServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;historyApiFallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;dev-server&quot;&gt;Dev Server&lt;/h2&gt;

&lt;p&gt;To get good developer experience, it is important to setup a realtime debugging environment for development. I was prepared to setup dev server for my isomorphic app with webpack-dev-middleware and webpack-hot-middleware.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'webpack'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpackConfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'../config/webpack.dev.config.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;compiler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;webpackConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpackDevMiddleware&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'webpack-dev-middleware'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpackHotMiddleware&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'webpack-hot-middleware'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Dev&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;webpackDevMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;compiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;noInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpackConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}));&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// HMR&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;webpackHotMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;compiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/__webpack_hmr'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;heartbeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;However, things became complex with multiple pages. It seemed that webpack-dev-middleware never actually build files into output path.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;index.html&lt;/code&gt; was always accessbile, while the other page - &lt;code class=&quot;highlighter-rouge&quot;&gt;admin.html&lt;/code&gt; was possibly in some black hole. I resolved it by &lt;a href=&quot;https://github.com/jantimon/html-webpack-plugin/issues/145#issuecomment-170554832&quot;&gt;serve the files from the compiler&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;compiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;outputPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'admin.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;compiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;outputFileSystem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;readFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'content-type'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'text/html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;In the end, I managed to make it work that I can simply start to dev by one command &lt;code class=&quot;highlighter-rouge&quot;&gt;yarn server&lt;/code&gt;, with a Node server, a React app and HMR.&lt;/p&gt;

&lt;h2 id=&quot;build-after-deployment&quot;&gt;Build after Deployment&lt;/h2&gt;

&lt;p&gt;Deployment on Heroku is easy, but I had to commit &lt;code class=&quot;highlighter-rouge&quot;&gt;dist&lt;/code&gt; folder to codebase at first, which was really a heavy way (hundreds of kilobytes each push). Then I found &lt;code class=&quot;highlighter-rouge&quot;&gt;heroku-postbuild&lt;/code&gt; hook, by which deployment can trigger Webpack build.&lt;/p&gt;

&lt;p&gt;So let’s add &lt;code class=&quot;highlighter-rouge&quot;&gt;heroku-postbuild&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;package.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;heroku-postbuild&quot;: &quot;webpack -p --config ./config/webpack.prod.config.js&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Hint&lt;/em&gt;: We should ensure that the build process works before pushing codes. Otherwise, deployment fails.&lt;/p&gt;

&lt;h1 id=&quot;optimizing-and-preact&quot;&gt;Optimizing and Preact&lt;/h1&gt;

&lt;p&gt;After the launch of new Node/React application, I could hardly ignore the long gap between the response reached and I saw the page finally. Heroku is commonly laggy in China due to geolocation reason and the great firewall. I put it down to this reason until I found the &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle.js&lt;/code&gt; is 1.8 mb.&lt;/p&gt;

&lt;p&gt;The reason is that the Webpack production configuration was wrong, I fixed it by adding &lt;code class=&quot;highlighter-rouge&quot;&gt;UglifyJsPlugin&lt;/code&gt; and it is now 700 kb.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;HtmlWebpackPluginConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NoEmitOnErrorsPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;DefinePlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'process.env.NODE_ENV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;production&quot;'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;optimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;OccurrenceOrderPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;optimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;UglifyJsPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;compress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;screw_ie8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;warnings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;mangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;screw_ie8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;screw_ie8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Even 700 kb is a considerably large size. And then I came up with an idea of using &lt;a href=&quot;https://github.com/developit/preact&quot;&gt;Preact&lt;/a&gt;, “Fast 3kb React alternative with the same ES6 API”, which is confirmed by my frontend expert friend &lt;a href=&quot;https://github.com/yanni4night&quot;&gt;@yanni4night&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I had no many codes so I use Preact directly, without using preact-compat to make it compatible with React.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import { h, Component } from 'preact';
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;It goes as soon as I change the import statements on the top.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;react-router&lt;/code&gt; was replaced by &lt;code class=&quot;highlighter-rouge&quot;&gt;preact-router&lt;/code&gt;, which is even more user-friendly. The parameters are simply passed to &lt;code class=&quot;highlighter-rouge&quot;&gt;props&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;Router:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;EventPage path=&quot;/event/:name&quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;EventPage Component:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export default class EventPage extends Component {
  constructor(props) {
    super(props);

    this.state = {
      eventName: props.name,
      pageNum: props.page || 0,
    };
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;After the optimization, it is &lt;em&gt;only&lt;/em&gt; 364 kb and typically takes less than 2 seconds to load the application. Using Preact is a good choice, while we can get the advantage of React and benefit from the lightweight.&lt;/p&gt;

&lt;p&gt;At last, &lt;strong&gt;DO NOT&lt;/strong&gt; forget to turn on &lt;code class=&quot;highlighter-rouge&quot;&gt;gzip&lt;/code&gt; of your Express server or other static file server like Nginx. That dramatically cuts the bundle size to 1/4, which is less than 100kb now.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;The development experience of frontend is great, with fancy frameworks, tools and developer’s ecology. It evolves very fast, faster than evolvement of its documentation. The examples of the documentations fail frequently as version increases fast. But, it’s fantastic that they often give accurate migration advice so that I can fix immediately. For other problems, StackOverflow provides strong supports as frontend people are the most vigorous in the industry.&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Jul 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/isomorphic-react-preact-with-heroku.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/isomorphic-react-preact-with-heroku.html</guid>
        
        <category>Preact</category>
        
        <category>React</category>
        
        <category>Rails</category>
        
        <category>Heroku</category>
        
        
      </item>
      
    
      
      <item>
        <title>Awesome Terminal Tools</title>
        <description>&lt;p&gt;This article recommends awesome (and even funny) terminal tools, both executables and libraries.&lt;/p&gt;

&lt;p&gt;I first posted this on Oct 22th, 2015. And it is renewed on Nov 29th, 2017.&lt;/p&gt;

&lt;h2 id=&quot;softwares&quot;&gt;Softwares&lt;/h2&gt;

&lt;h3 id=&quot;tldr&quot;&gt;&lt;a href=&quot;https://tldr-pages.github.io/&quot;&gt;tldr&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;📚 Simplified and community-driven man pages.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;tldr ps

ps

Information about running processes.

- List all running processes:
    ps aux

- List all running processes including the full &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;string:
    ps auxww

- Search &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;a process that matches a string:
    ps aux | grep string
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;lock-cli&quot;&gt;&lt;a href=&quot;https://github.com/sindresorhus/lock-cli&quot;&gt;lock-cli&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Lock your system from the command-line. Support macOS, Linux, and Windows.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Then, your OS will be locked.&lt;/p&gt;

&lt;h3 id=&quot;gotty&quot;&gt;&lt;a href=&quot;https://github.com/yudai/gotty&quot;&gt;Gotty&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;An awesome live broadcasting tool, which output your terminal, written with Go.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yudai/gotty/master/screenshot.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;wego&quot;&gt;&lt;a href=&quot;https://github.com/schachmat/wego&quot;&gt;Wego&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Weather forecasting with ASCII GUI written in Go.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/c3d2b92671f1ded5d5a9a9ebafdc836527f97269/687474703a2f2f7363686163686d61742e6769746875622e696f2f7765676f2f7765676f2e676966&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;qrcode-terminal&quot;&gt;&lt;a href=&quot;https://github.com/gtanner/qrcode-terminal&quot;&gt;Qrcode-terminal&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Generate and display QR code with Node.js.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/1b87ab92f230c35ff19abf2449e0fd52bea3f124/68747470733a2f2f7261772e6769746875622e636f6d2f6774616e6e65722f7172636f64652d7465726d696e616c2f6d61737465722f6578616d706c652f62617369632e706e67&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;doubanfm&quot;&gt;&lt;a href=&quot;https://github.com/turingou/douban.fm&quot;&gt;Douban.fm&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Console based &lt;a href=&quot;https://douban.fm/&quot;&gt;Douban FM&lt;/a&gt; client, written in Node.js. It runs on Mac but not very stable.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/ca0a75a041cb65d1ad9dddc2e44b1c52903db7d0/687474703a2f2f7777312e73696e61696d672e636e2f6c617267652f36316666306465337477316563696a3364713830626a32306d3430657a3735752e6a7067&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;proxychains&quot;&gt;&lt;a href=&quot;https://github.com/rofl0r/proxychains-ng&quot;&gt;ProxyChains&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Socks and HTTP proxy for terminal. And we can use &lt;code class=&quot;highlighter-rouge&quot;&gt;proxychains&lt;/code&gt; to boost speed of some services and get across the wall.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ proxychains4 git push
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;libraries&quot;&gt;Libraries&lt;/h2&gt;

&lt;h3 id=&quot;terminal-table&quot;&gt;&lt;a href=&quot;https://github.com/tj/terminal-table&quot;&gt;Terminal Table&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Terminal Table is a fast and simple, yet feature rich ASCII table generator written in Ruby.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Simple but useful gem for Ruby. &lt;code class=&quot;highlighter-rouge&quot;&gt;terminal-table&lt;/code&gt; is really powerful and easy-to-use to build and display tables in console based GUI.&lt;/p&gt;

&lt;p&gt;This is the official example of &lt;code class=&quot;highlighter-rouge&quot;&gt;terminal-table&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rows = []
rows &amp;lt;&amp;lt; ['One', 1]
rows &amp;lt;&amp;lt; ['Two', 2]
rows &amp;lt;&amp;lt; ['Three', 3]
table = Terminal::Table.new :rows =&amp;gt; rows

# &amp;gt; puts table
#
# +-------+---+
# | One   | 1 |
# | Two   | 2 |
# | Three | 3 |
# +-------+---+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;macos-specifics&quot;&gt;macOS Specifics&lt;/h2&gt;

&lt;h3 id=&quot;mas&quot;&gt;&lt;a href=&quot;https://github.com/mas-cli/mas&quot;&gt;MAS&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Mac App Store command line interface.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;It is designed for scripting and automation. However, I really like and need this awesome tool to update with terminal instead of the AppStore GUI, which fails frequently in China mainland.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mas list

724472954 Manico (2.3.2)
623795237 Ulysses (2.8.2)
411246225 Caffeine (1.1.1)
409203825 Numbers (4.1.1)
836500024 WeChat (2.2.8)
928871589 Noizio (1.5)
409201541 Pages (6.1.1)
784801555 Microsoft OneNote (15.34)
409183694 Keynote (7.1.1)
410628904 Wunderlist (3.4.6)
973134470 Be Focused (1.6.2)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mas upgrade

Upgrading 1 outdated application:
WeChat (2.2.8)
==&amp;gt; Downloading WeChat
==&amp;gt; Installed WeChat
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;m-cli&quot;&gt;&lt;a href=&quot;https://github.com/rgcr/m-cli&quot;&gt;m-cli&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Swiss Army Knife for macOS!&lt;/em&gt; By &lt;code class=&quot;highlighter-rouge&quot;&gt;m-cli&lt;/code&gt;, it enables you to control everything of Mac with commands.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ m 

  Swiss Army Knife for macOS ! 


usage:  m [OPTIONS] COMMAND [help]

    OPTIONS
        --update        update m-cli to the latest version
        --uninstall     uninstall m-cli

    COMMANDS:
        help
        battery
        bluetooth
        dir
        disk
        display
        dns
        dock
        finder
        firewall
        gatekeeper
        group
        hostname
        info
        itunes
        lock
        network
        nosleep
        notification
        ntp
        printer
        restart
        safeboot
        screensaver
        service
        shutdown
        sleep
        timezone
        trash
        update
        user
        volume
        vpn
        wallpaper
        wifi
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ m battery status
Now drawing from 'AC Power'
 -InternalBattery-0 (id=3997795)	100%; charged; 0:00 remaining present: true
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 09 Jun 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/awesome-terminal-tools.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/awesome-terminal-tools.html</guid>
        
        <category>Awesome</category>
        
        <category>Terminal</category>
        
        <category>Tools</category>
        
        <category>Go</category>
        
        <category>Node.js</category>
        
        
      </item>
      
    
      
      <item>
        <title>我在 Slack 和自己聊天</title>
        <description>&lt;p&gt;&lt;img src=&quot;/image/slack-logo.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://slack.com/&quot;&gt;Slack&lt;/a&gt; 是一款为团队协作设计的即时通信软件，维基百科的定义是：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Slack is a cloud-based set of team collaboration tools and services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;在 Slack 中，私聊似乎没有那么重要，取而代之的是一系列不同的 Channel。这些 Channel 以 Hashtag “#” 开头，标题就是话题。如果中间讨论到跟主题相关性没那么高的内容，可以以某条聊天为基准开启一个独立的 Thread 接着聊，不用占据公频不断的引用和回复。&lt;/p&gt;

&lt;p&gt;Slack 另一创新点是对第三方应用的集成，可以集成各类 Apps 和聊天机器人。不同类型的应用集成，和 Slack 碰撞出了更多生产力的火花，同时还催生了 ChatOps 之类的用法，大大提高了工作效率和体验。&lt;/p&gt;

&lt;h1 id=&quot;为什么和自己聊天&quot;&gt;为什么和自己聊天？&lt;/h1&gt;

&lt;p&gt;由于种种原因，我所在的“大公司”还在用着非常落后的即时通信软件，大环境是不能指望了。而小团队，倒是可能会有些兴趣，但要翻越知识普及、群体翻墙等诸多障碍，况且基础设施基本不支持 ChatOps，而且大部分协作还是跟外面的团队。唉，“覆巢之下，焉有完卵”啊！任你有好工具的选择，但垃圾的生态让你寸步难行。&lt;/p&gt;

&lt;p&gt;幸好，我也有自己的 Side Project，在这里我可以决定技术栈，我可以决定协作方式。基础设施分别使用 PaaS（Heroku 运行 Rails 和 Postgres）和 VPS（Linode 里通过 Docker 跑 VPN，用 NewRelic 监控），技术栈用 Rails、React 和 Vue，代码放在 GitHub，持续集成 Travis，代码分析 CodeClimate，项目管理用 Wunderlist 和 Quip。&lt;/p&gt;

&lt;p&gt;很好，很强大！&lt;/p&gt;

&lt;p&gt;唯独 Slack 似乎没有找到自己的位置，毕竟自己跟自己协作没有必要聊天。但我知道 Slack 的意义可不只是当 QQ 用，用多了国外的工具链后，我发现了 Slack 存在的另一大意义——取代邮件。并且陆续找到了一些适合个人开发者的玩法，现在分享给大家。&lt;/p&gt;

&lt;h3 id=&quot;通知中心&quot;&gt;通知中心&lt;/h3&gt;

&lt;h5 id=&quot;服务通知&quot;&gt;服务通知&lt;/h5&gt;

&lt;p&gt;欧美IT企业对于邮件的使用程度远远超过了国内，邮件是主要通知方式，比如 Travis 默认状态下持续集成成功、失败、重新成功等得给你来一封邮件。而作为强迫症的我，就必须点进去删除一封邮件。这种方式既浪费时间又不低碳。&lt;/p&gt;

&lt;p&gt;而 Slack 可以集成第三方 Apps，关闭邮件提醒，接管接收各类云服务的通知。于是，我在 Slack 中创建了 &lt;code class=&quot;highlighter-rouge&quot;&gt;#dev&lt;/code&gt; 频道，收取 GitHub、Travis、CodeClimate 的通知。&lt;/p&gt;

&lt;p&gt;比如 Travis，我们可以直接在 &lt;code class=&quot;highlighter-rouge&quot;&gt;.travis.yml&lt;/code&gt; 指定关闭邮件提醒，并推送到 Slack：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;notifications:
  email: false
  slack: token-of-your-slack
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/image/slack-travis-msg.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;不过，这里有个限制，免费用户只能添加10个应用。还好我用的云服务不足10个。真需要付费的时候，那也未尝不可，花钱买时间没什么不对的。&lt;/p&gt;

&lt;h5 id=&quot;chatops&quot;&gt;ChatOps&lt;/h5&gt;

&lt;p&gt;ChatOps 就是“聊天式运维”，通过聊天软件集成机器人方式，完成对服务器状态的查看和操作。Slack 就是这一领域的典型代表。&lt;/p&gt;

&lt;p&gt;我会把运维相关的内容发送到 &lt;code class=&quot;highlighter-rouge&quot;&gt;#ops&lt;/code&gt; 频道。对于 Heroku 这样成熟、开发体验友好的平台，其实没有什么需要运维的。通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;heroku-cli&lt;/code&gt; 几乎可以干任何事情，因为 &lt;code class=&quot;highlighter-rouge&quot;&gt;#ops&lt;/code&gt; 频道只会接到代码更新部署的事件。而 Linode 那边的确需要运维，对于部署我已经通过 GitHub WebHooks 和部署脚本实现了自动化，所以这里只会接收到 NewRelic 的监控报警。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/slack-ops-msg.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;不过这个地方有个尴尬😅之处，NewRelic 监控的是部署 VPN 的主机，如果报警后会发送到 Slack，但 Slack 又是通过这个 VPN 访问的，因此……&lt;/p&gt;

&lt;p&gt;当然，我还远没有用到 ChatOps 的精髓，有空还会继续探索试一些更实用的工具，真正地 Chat 起来。&lt;/p&gt;

&lt;h3 id=&quot;稍后阅读&quot;&gt;稍后阅读&lt;/h3&gt;

&lt;p&gt;我是稍后阅读类 App 的重度用户，Pocket 世界阅读量排名进入 Top 1%，最近也经常用 Instapaper。我也维持着一套 Reeder 订阅 RSS，然后泛读和稍后阅读的阅读 flow。&lt;/p&gt;

&lt;p&gt;但其实很多时候，有些文章属于路上发现，到了电脑前就会立刻阅读。于是，我创建了 &lt;code class=&quot;highlighter-rouge&quot;&gt;#articles&lt;/code&gt; 频道，把一些感兴趣且看着还不错的文章发到 Slack 中。至少，这比微信的文件同步助手手感更丝滑。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/slack-share-article.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;看图--获得灵感&quot;&gt;看图 &amp;amp; 获得灵感&lt;/h3&gt;

&lt;p&gt;开发的过程是快乐的，但也时常伴随着挫折和焦急。我们需要一些方式娱乐和舒缓自己，重新获得力量和灵感。&lt;/p&gt;

&lt;p&gt;开发间歇的娱乐活动有很多，比如游戏和音乐。而我觉得看照片比较适合 Slack，怡情养眼且不耗时，还会时不时收获灵感。&lt;/p&gt;

&lt;p&gt;接收图片的频道有三个: &lt;code class=&quot;highlighter-rouge&quot;&gt;#girls&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;#photography&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;#design&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;#girls&lt;/code&gt; 的确是美女但不开车，&lt;code class=&quot;highlighter-rouge&quot;&gt;#photography&lt;/code&gt; 是正规摄影小作品，而 &lt;code class=&quot;highlighter-rouge&quot;&gt;#design&lt;/code&gt; 接收设计类的图片。&lt;/p&gt;

&lt;p&gt;为了增加分享图片的仪式感，我引入了 &lt;a href=&quot;https://workflow.is/&quot;&gt;Workflow&lt;/a&gt;：Post Image To Slack，通过 Action Extension 触发分享操作。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/slack-post-image-workflow.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此外，还改了改 Save from Instagram 的 Workflow，保存过后通过 Post Image To Slack 直接发给 Slack &lt;code class=&quot;highlighter-rouge&quot;&gt;#girls&lt;/code&gt;。&lt;/p&gt;

&lt;h5 id=&quot;随机图片&quot;&gt;随机图片&lt;/h5&gt;

&lt;p&gt;休闲过后还需要来点灵感，随机是个好方法，于是剩下不多的 Apps 集成额度就用在了这里，我选择加入了 Dribbble 和 Unsplash。&lt;/p&gt;

&lt;p&gt;通过 Dribbble，可以随机获取一张设计稿或者是通过关键词搜索一张。虽然我不是设计师，但好的设计让人愉悦，也能激发灵感。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/dribbble london
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/image/slack-dribbble-london.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Unsplash 我在&lt;a href=&quot;/page/unsplash-simple-pure-photos.html&quot;&gt;之前的文章&lt;/a&gt;进行过介绍，在 Slack 中可以随机获取一张高质量摄影作品，这是一种调节开发节奏的好方法。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/unsplash random
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://source.unsplash.com/random&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;最后&quot;&gt;最后&lt;/h1&gt;

&lt;p&gt;如果一个工具，既可以让人提高生产力，又能让人愉悦，那我们就赶快拿起&lt;del&gt;电话订购&lt;/del&gt;电脑使用吧！&lt;/p&gt;
</description>
        <pubDate>Tue, 23 May 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/self-collaborating-with-slack.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/self-collaborating-with-slack.html</guid>
        
        <category>Slack</category>
        
        <category>Dev</category>
        
        
      </item>
      
    
      
      <item>
        <title>摄影的意义</title>
        <description>&lt;h2 id=&quot;最初的入门&quot;&gt;最初的入门&lt;/h2&gt;

&lt;p&gt;通常来说，我并不是一个很有艺术细胞的人。我画画垃圾、写字不好看、手工能力不强，艺术匠心的东西似乎是不怎么行。&lt;/p&gt;

&lt;p&gt;可能是因为 2014 一个人过于无聊，我通过消费提升了一些生活品质，开始摸索属于自己的 lifestyle，而不是过着上课、玩游戏或是上班、玩游戏的单调生活。&lt;/p&gt;

&lt;p&gt;Instagram 是我喜欢的 App 之一，第一次使用是 2012 年在澳大利亚时。由于一直关注和处于互联网行业的缘故，很多很火的 App 早期我都体验过，虽说当时并不见得会认真玩。:)&lt;/p&gt;

&lt;p&gt;第一张照片时 QUT 校园里的 Windows 蓝屏。&lt;/p&gt;

&lt;script async=&quot;&quot; defer=&quot;&quot; src=&quot;//platform.instagram.com/en_US/embeds.js&quot;&gt;&lt;/script&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/NkkNMvy1G2/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;华丽的windows蓝屏&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2012-07-27T04:44:10+00:00&quot;&gt;Jul 26, 2012 at 9:44pm PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;借助 Instagram 优秀的滤镜，我也能拍出看着“还行”的作品（事实上，事后看来，这大多只是在滤镜加持下出现的错觉）。所以开始想玩摄影，也是在 2015 年 6 月购入了黑卡 3 代——索尼 RX100 Mark III。&lt;/p&gt;

&lt;h2 id=&quot;黑卡3&quot;&gt;黑卡3&lt;/h2&gt;

&lt;p&gt;当时对参数并不是很懂，我只知道它是“大法黑科技”，有蔡司变焦镜头（据说新手用变焦入门比较好）。价格比较贵似乎是质量的保证，颜值也颇为喜爱。至于单反和微单，我实在觉得单反太丑了，微单的话按照黑卡吹的说法：&lt;del&gt;微单套头比不过黑卡&lt;/del&gt;。&lt;/p&gt;

&lt;p&gt;拿着黑卡开拍了起来，很快就有了三个问题困扰我。最严重的是，黑卡并没有光学防抖，即使 F1.8 光圈全开，室内和偏暗的地方基本稳糊，1 寸“大底” ISO 也不能太高。&lt;/p&gt;

&lt;p&gt;然后就是“虚化”能力。虚化是“糖水片”利器，虽然在摄影圈，糖水片是贬义词。但对于入门新手来说，能拍出糖水片简直是一段时间内的终极目标，十分令人羡慕。&lt;/p&gt;

&lt;p&gt;最后就是索尼的 JPG 直出的确比较黄，构图色彩都不行，那自然出片率很低。除非遇上天气特别好，景色特别美，躺着也出片的场景。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/-37aqbS1Jl/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;We can use Lightroom or #vsco to make the leaves either green or red. However, it is impossible to make a blue sky and breathe the fresh air in a haze day. #beijing #autumn #rx100&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2015-12-04T14:50:53+00:00&quot;&gt;Dec 4, 2015 at 6:50am PST&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;黑卡事后评价&quot;&gt;黑卡事后评价&lt;/h3&gt;

&lt;p&gt;黑卡是一款很经典的机器，2400 万像素 1 寸 CMOS，配备等效 24-70mm F1.8-2.8 Zeiss 镜头，并内置有可弹出式的 EVF。&lt;/p&gt;

&lt;p&gt;容易糊的原因有很多，我认为主要的还是因为对快门速度的掌控不好。可能有一个不太靠谱的原因是 1 寸底配 2400 万像素，或许像素密度较大更容易这样。&lt;/p&gt;

&lt;h2 id=&quot;奥林巴斯&quot;&gt;奥林巴斯&lt;/h2&gt;

&lt;p&gt;为了满足可换镜头相机的梦想，开始不断在索尼全画幅、富士、松下等微单厂商之间摇摆，摇着摇着到了奥林巴斯。某个周末，突然看到京东 E-M5 Mark II 特价，于是入手。就这样戏剧性的进入了奥林巴斯和 M43 的阵营。&lt;/p&gt;

&lt;p&gt;E-M5 Mark II 造型比较硬朗，五轴防抖超强，一秒内基本不糊；直出色彩还不错，简单修图可以发 Instagram；本身虚化和全画幅差距较大，但利用长焦也可以得到不错的虚化效果。&lt;/p&gt;

&lt;h3 id=&quot;dg15-f17&quot;&gt;DG15 F1.7&lt;/h3&gt;

&lt;p&gt;颜值极高的松下徕卡系列镜头，等效 30mm 的小广角，拍景色和人文景观都挺不错的。但光圈环在奥林巴斯机身无法正常使用，并且人脸识别也跟 E-M5 Mark II 配合的不好。&lt;/p&gt;

&lt;p&gt;使用 DG15，我有了一些自己的风格，主要拍好看的咖啡店室内以及一些小场面的景色。配合 VSCO 的滤镜，Instagram Like 数上升了不少。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:40.09259259259259% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BLA1C7Njxj7/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;OCT Loft, Shenzhen. #olympus #olympuscamera #em5 #em5markii #vsco #vscocam #m43 #shenzhen&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-10-01T08:05:06+00:00&quot;&gt;Oct 1, 2016 at 1:05am PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BLiedV9DtrL/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;#coffee #coffeetime #☕️ #vsco #vscocam #gloriajeans #olympus #olympuscamera #em5 #em5markii&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-10-14T09:41:55+00:00&quot;&gt;Oct 14, 2016 at 2:41am PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BMPCZNEjUYY/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;The boundary #autumn #autumn🍁 #vsco #vscocam #m43 #em5 #em5markii #olympus #olympuscamera&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-10-31T17:02:30+00:00&quot;&gt;Oct 31, 2016 at 10:02am PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;45mm-f18&quot;&gt;45mm F1.8&lt;/h3&gt;

&lt;p&gt;这是一只物美价廉体积小的人像头，充分发挥了 M43 镜头的优势。虽然光圈也就那样，但等效 90mm 的焦距可以获得可观的虚化效果。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BAsICT5y1DT/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;#summerpalace #olympuscamera #em5mark2 #vsco #portrait&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-01-18T17:53:03+00:00&quot;&gt;Jan 18, 2016 at 9:53am PST&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;9-18mm-f45-56&quot;&gt;9-18mm F4.5-5.6&lt;/h3&gt;

&lt;p&gt;纠结了一阵购入的一个超广角变焦镜头。出片率似乎比较高，但其实比较失败的一个镜头。广角畸变特别大，边缘不能细看。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:37.4537037037037% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BES2Dy7y1Gv/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;#forbiddencity #olympus #olympuscamera #olympusomd #em5mark2 #m43 #zuiko #beijing #instabeijing&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-04-17T08:20:32+00:00&quot;&gt;Apr 17, 2016 at 1:20am PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h2 id=&quot;富士&quot;&gt;富士&lt;/h2&gt;

&lt;p&gt;其实在黑卡后期，我就曾经险些动心在富士 X-T1 打折的时候下单了，但最后忍住了。之后时不时会中毒一阵富士，比如 X-Pro2 刚发布时，但这价格有点望而生畏所以能忍得住。2016 年中旬，我又开始毒起了 X-100T，因为既想体验富士的色彩又可以获得一个轻便的35mm定焦相机。&lt;/p&gt;

&lt;p&gt;但是，一直以来的冷静和克制，在 2016 年的双十一被打破。又是京东 X-Pro2 的特点激起了心中的火花，于是入了 X-Pro2 和 35mm F2 WR 的定焦套机。&lt;/p&gt;

&lt;p&gt;富士主打的产品线分为正常系列（X-T2/X-T1, X-T10, X-A3/X-A2）和旁轴系列（X-Pro2/X-Pro1, X-E2）。X-Pro2 是旁轴系中的旗舰，若干年来第一款换了 CMOS 的机器，终于从若干年前的 SONY 提供的 1610 万像素 CMOS 换成了还是 SONY 提供的新的 2400 万像素。操控上说，对焦速度什么的也提升很大；把主要按键都放在了右侧，可以单手操控（事后证明只是单手操作，但左手得托着，并不是单手拍摄，因为单手 HOLD 不住重量）；加入了对焦点拨杆，用于选择对焦点，很方便评价很高；最后就是，快门和 ISO 调节“共用”一个按键，提起之后可以调节 ISO。我表示，这个操作还比较方便，就是会打断“瞄准”，必须换个姿势才能调节，也许这就是它被吐槽的原因吧。&lt;/p&gt;

&lt;p&gt;X-Pro2 的最大优势可能是颜值和逼格，复古旁轴风摆在这。从实际使用角度来说，个人感觉白平衡表现特别好，尤其是在拍室内静物的时候。之前自然光线不足的情况下，拍静物受到日光灯影响很严重，但 X-Pro2 拍时不存在这问题。PS：如果早知道是白平衡的问题，当初其实可以用 RAW 格式直接调就好了，这是个小教训。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BM-j0iYDnk-/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;What&amp;#39;s in my bag? #muji #iphone #iphonese #kiehls #kindle #kindleoasis  #fujifilm #xpro2 #fujixpro2 #instax #danielwellington&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-11-19T03:58:54+00:00&quot;&gt;Nov 18, 2016 at 7:58pm PST&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;之前一直以为富士的胶片模拟是个独立的功能，就如同现在很多相机的胶片模拟或是创意滤镜一样，只不过富士的不“玩具”所以敢拿出来用。但到手后才发现，所谓的胶片模拟就是富士的 JPG 直出，所有直出都被称为胶片模拟。标准的 PROVIA、绚丽的 VELVIA，以及 X-Pro2 等机型开始才有的 ACROS 黑白模拟都很常用。其中，ACROS 是基于新的 X-Processor Pro 的高速处理能力所研发的，所以目前只有 X-Pro2 和 X-T2 才有。据说，它“能呈现黑白色调的流畅渐变和美丽的纹理，优于目前的黑白色彩模式”。&lt;/p&gt;

&lt;p&gt;讨喜的白平衡，加上多年积累的胶片色彩，VSCO 被打入“冷宫”，Snapseed 因此上位。Google 收购出品的 Snapseed，非常“智能”。照片歪了可以帮你调直，参数可以一键智能优化。当然，这个智能优化有一个硬伤，就是特别喜欢拉暗部、平衡“温度”，这很不靠谱。&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-captioned=&quot;&quot; data-instgrm-version=&quot;7&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:33.24074074074074% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&quot; margin:8px 0 0 0; padding:0 4px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/BNTqk9QDWZD/&quot; style=&quot; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&quot; target=&quot;_blank&quot;&gt;#fujifilm #fujixpro2 #21mm #acros #sanlitun #snapseed&lt;/a&gt;&lt;/p&gt; &lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;A photo posted by David Zhang (@crispgm) on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2016-11-27T08:41:59+00:00&quot;&gt;Nov 27, 2016 at 12:41am PST&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;X-Pro2 也带来一个迫不得已的变化。由于没有光学防抖，必须很关注快门速度，一旦不行，赶紧折腾光圈和 ISO。之前奥林巴斯的防抖在暗光简直是逆天的存在，以至于都很少调节 ISO。&lt;/p&gt;

&lt;p&gt;因此，除去感情因素，也为了这个原因，我并不想灭门奥林巴斯。况且，比起堪称旗舰的 X-Pro2，E-M5 Mark II 非常小巧，挂着 DG15 出去溜达没什么负担。&lt;/p&gt;

&lt;h2 id=&quot;感受&quot;&gt;感受&lt;/h2&gt;

&lt;p&gt;对于我来说，摄影最初的意义只是随手分享一些有意思的“东西”。可能是高兴的瞬间，也可能是看到了一个好看的景色。很自然，很随意。之后就是记录美的瞬间，包括美丽的景色、人物、静物等等。在这期间，审美的能力会得到提升，包括构图、色彩和对光的掌握。当我们能够完美记录美的时候，就进入了最后的境界，那就是情感与画面的结合。我们即使水平不够但也可能偶尔会踏入其中。&lt;/p&gt;

&lt;p&gt;不过话说回来，作为爱好，摄影可以有很多玩法，就像画画。我认为，能玩出自己的精彩也就对得起烧过的器材了。&lt;/p&gt;

&lt;p&gt;对于器材，我认为相机是个很系统、很复杂的坑，新手做了功课也不见得就能怎样。真的需要有一些尝试和体会，并且不同时期会有不同的喜好。不折腾很难一下子知道自己想要什么样的相机。不过就是相机和镜头价格还是很高的，希望能少走点弯路吧。&lt;/p&gt;
</description>
        <pubDate>Sun, 08 Jan 2017 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/meaning-of-photography.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/meaning-of-photography.html</guid>
        
        <category>Camera</category>
        
        <category>Photography</category>
        
        
      </item>
      
    
      
      <item>
        <title>技术周刊自动化</title>
        <description>&lt;h2 id=&quot;背景&quot;&gt;背景&lt;/h2&gt;

&lt;p&gt;技术博客和技术周刊对于一个有技术追求的技术团队来说都是标配，意义在于团队的技术氛围。由于日常业务繁忙和技术深度等原因，大多数技术周刊都是以转载为主。技术周刊的“主编”也就是负责人，肯定需要从事文章收集、筛选、格式化、校验和编译，并不需要编辑什么内容。这部分工作量不大，但枯燥无意义。我也是其中的一员，因此我决定用“技术周刊自动化”来解决技术周刊的整套收集、筛选、校验和发布的流程。&lt;/p&gt;

&lt;p&gt;这是我所在团队的技术博客 &lt;a href=&quot;https://msbu-tech.github.io/&quot;&gt;https://msbu-tech.github.io/&lt;/a&gt;，基于 Jekyll 创建，分为博客、周刊、分享、项目等板块。其中，最活跃的就是&lt;a href=&quot;https://msbu-tech.github.io/weekly/&quot;&gt;技术周刊&lt;/a&gt;。技术周刊每周都会发布，接收所有团队成员投稿，收集编译完毕后会发布到网站上，并且需要再在内部邮件组转一份。&lt;/p&gt;

&lt;h2 id=&quot;如何自动化&quot;&gt;如何自动化？&lt;/h2&gt;

&lt;p&gt;整体思路是基于 GitHub 构建一套自动化流程，通过 issues 进行收集，然后用脚本调用 GitHub API 处理导入和编译的各项步骤。&lt;/p&gt;

&lt;p&gt;由于是 Jekyll 是 Ruby 编写的，因此选择 Ruby 比较合适。并且由于只是一些简单的任务式脚本，所以选择 &lt;code class=&quot;highlighter-rouge&quot;&gt;Rakefile&lt;/code&gt; 作为载体来编写。&lt;/p&gt;

&lt;h3 id=&quot;整体流程&quot;&gt;整体流程&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;在 issues 中开启收集贴&lt;/li&gt;
  &lt;li&gt;从 issues 中导入周刊（处理格式、生成 yaml 和 markdown）&lt;/li&gt;
  &lt;li&gt;人工编译确认和自动化检测&lt;/li&gt;
  &lt;li&gt;发布然后关闭 issue 并感谢投稿人&lt;/li&gt;
  &lt;li&gt;完成 Wunderlist 中的任务&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;准备工作&quot;&gt;准备工作&lt;/h3&gt;

&lt;h4 id=&quot;github-api&quot;&gt;GitHub API&lt;/h4&gt;

&lt;p&gt;选择 Ruby 还有个好处就是 GitHub 自身是用 Ruby 编写，因此 GitHub API 的 Ruby 库 &lt;a href=&quot;https://github.com/octokit/octokit.rb&quot;&gt;Octokit.rb&lt;/a&gt; 非常简单好用。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Octokit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:access_token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;access_token&quot;&gt;access_token&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;access_token&lt;/code&gt; 不能对外暴露，因此需要在环境变量中设置或者通过指定环境变量来运行 &lt;code class=&quot;highlighter-rouge&quot;&gt;rake&lt;/code&gt;。&lt;/p&gt;

&lt;h4 id=&quot;msbu-bot&quot;&gt;msbu-bot&lt;/h4&gt;

&lt;p&gt;作为一个自动化的工作，我引入了一个机器人账号 &lt;a href=&quot;https://github.com/msbu-bot/&quot;&gt;msbu-bot&lt;/a&gt;，在调用 GitHub API 时使用。&lt;/p&gt;

&lt;h3 id=&quot;文章收集&quot;&gt;文章收集&lt;/h3&gt;

&lt;p&gt;建立一个专门 Repo 收集周刊内容 &lt;a href=&quot;https://github.com/msbu-tech/weekly&quot;&gt;msbu-tech/weekly&lt;/a&gt;。里面没有代码，只有 &lt;code class=&quot;highlighter-rouge&quot;&gt;README&lt;/code&gt; 来说明投稿的步骤流程，而 issues 则是收集贴。&lt;/p&gt;

&lt;p&gt;开始收集一周的周刊时，先用创建一个收集贴。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rake open[2016-12-06]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;也就是调用 &lt;code class=&quot;highlighter-rouge&quot;&gt;Octokit.rb&lt;/code&gt; 发 issue 接口：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create_issue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;issue_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;MSBU Weekly &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekly_date&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; is now in collecting. Post your entry following the instruction of &amp;lt;https://github.com/msbu-tech/weekly#投稿&amp;gt;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/image/msbu-bot-open-issue.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;导入和编译&quot;&gt;导入和编译&lt;/h3&gt;

&lt;p&gt;周刊文章收集完毕后，我们开始导入：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rake weekly[2016-12-06, true]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;文章投稿的格式是：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/post
- 疯狂的JSONP
- http://www.cnblogs.com/twobin/p/3395086.html
- 何为跨域？何为JSONP？JSONP技术能实现什么？是否有必要使用JSONP技术？
- javascript, jsonp, 跨域
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;这里面的工作主要是是遍历 issue，识别 &lt;code class=&quot;highlighter-rouge&quot;&gt;/post&lt;/code&gt; 投稿标识，然后获取标签、链接、介绍或评语、标签，而回贴人的 ID 就视为推荐人。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;issue_comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;referrer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eql?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/post&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[INFO] Skip comment &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Spacifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spacify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;- &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;- &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Spacifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spacify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;- &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;- &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;articles&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:comment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:tags&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:referrer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;referrer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;其中，&lt;code class=&quot;highlighter-rouge&quot;&gt;Spacifier&lt;/code&gt; 是我自己做的一个 &lt;a href=&quot;https://github.com/crispgm/spacifier&quot;&gt;Gem&lt;/a&gt;，用于在中英文共存的字符串中，在中英文之间加一个空格。这样可以优化显示效果，之前为了一些完美主义都是手动转的。&lt;code class=&quot;highlighter-rouge&quot;&gt;Spacifier&lt;/code&gt; 目前功能还不太完善，后续会慢慢改善。&lt;/p&gt;

&lt;p&gt;导入文件后会提示导入文章数，并创建周刊网页和邮件所需的 Markdown 文件。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[INFO] Imported 8 article(s).
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;测试&quot;&gt;测试&lt;/h3&gt;

&lt;p&gt;导入了文章后，需要进行一些基本的测试。投稿人和主编们时常会写错写重复一些字段，所以做了个自动化测试进行重复检测和字段缺失检测。这也接了 Travis 进行持续集成。&lt;/p&gt;

&lt;p&gt;同时，推荐一个好用的 Gem —— &lt;a href=&quot;https://github.com/fazibear/colorize&quot;&gt;colorize&lt;/a&gt;。&lt;code class=&quot;highlighter-rouge&quot;&gt;colorize&lt;/code&gt; “打开”了 &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt;，需要报错的时候，只需要在输出的字符串后面调用 &lt;code class=&quot;highlighter-rouge&quot;&gt;.red&lt;/code&gt; 方法，就可以在控制台用红色显示，很醒目。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[ERROR] Import articles error!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;发布&quot;&gt;发布&lt;/h3&gt;

&lt;p&gt;最后一步就是发布了。&lt;/p&gt;

&lt;p&gt;文件都已经生成好，只需要 &lt;code class=&quot;highlighter-rouge&quot;&gt;git push&lt;/code&gt; 到 GitHub，就能生效了。&lt;/p&gt;

&lt;p&gt;我们还需要做的是告诉大家周刊发布的好消息，对投稿人表示感谢，然后关闭掉 issue。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rake publish
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOL&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
  Congratulations!
  MSBU Weekly &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekly_date&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; is published on &amp;lt;https://msbu-tech.github.io/weekly/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekly_date&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;-weekly.html&amp;gt;!
  Thanks &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contributors_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;', '&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; for your great contribution!
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  EOL&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close_issue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/image/msbu-bot-say-thanks-and-close.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;完成-wunderlist&quot;&gt;完成 Wunderlist&lt;/h3&gt;

&lt;p&gt;这里需要再引入一个非官方的 Wunderlist API：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wunderlist-api&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;wl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Wunderlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;API&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;access_token: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WLIST_ACCESS_TOKEN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;client_id: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WLIST_CLIENT_ID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;工作清单&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eql?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MSBU Tech Weekly&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weekly_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eql?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;due_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;completed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;show_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Completing wunderlist task...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;写在最后&quot;&gt;写在最后&lt;/h2&gt;

&lt;p&gt;文章所说的&lt;a href=&quot;https://github.com/crispgm/weekly&quot;&gt;源码在此&lt;/a&gt;，如果本文帮助了你或者给了一些启发，帮忙来个 Star 吧。&lt;/p&gt;
</description>
        <pubDate>Tue, 06 Dec 2016 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/engineering-weekly-automation.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/engineering-weekly-automation.html</guid>
        
        <category>Jekyll</category>
        
        <category>rake</category>
        
        <category>周刊</category>
        
        <category>自动化</category>
        
        
      </item>
      
    
      
      <item>
        <title>Unsplash, 简单纯粹的图片分享</title>
        <description>&lt;p&gt;最近，微博上关注的开发者推荐了一个由&lt;a href=&quot;http://sspai.com/&quot;&gt;少数派&lt;/a&gt;制作的小而美的壁纸 App - &lt;a href=&quot;http://sspai.com/33525&quot;&gt;Cuto&lt;/a&gt;。这 PR 文里面提到：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cuto 每周只会更新 6 ~ 10 张新图片，每一张都会经过精挑细选。因为我们认为，随便选几十张图片抛给用户挑选，不仅是对用户的不负责，也是对自己产品的不负责。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;同时，也将到图片的来源：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cuto 里面的图片来自著名的无版权图片网站 Unsplash&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;于是，我出于好奇就找到了 &lt;a href=&quot;https://unsplash.com/&quot;&gt;Unsplash&lt;/a&gt;，以及 Cuto 壁纸的 &lt;a href=&quot;https://unsplash.com/collections/136026/cuto-wallpaper&quot;&gt;Collection&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unsplash.com/&quot;&gt;Unsplash&lt;/a&gt; 是一个免费的高清图片网站。&lt;strong&gt;高品质&lt;/strong&gt;，在 Unsplash 上传照片至少要有300万像素。&lt;strong&gt;简单&lt;/strong&gt;，Unsplash 的设计很简洁，精力会被集中在图片本身。&lt;strong&gt;纯粹&lt;/strong&gt;，没有过度的社交，没有任何 annoying 提醒。除了查看、下载和收藏外，也就只有点赞了。点赞并不是为了社交，而是对作者表示感谢。最后，令人惊喜和值得期待的是，Unsplash 上面的图片可以免费下载和使用。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;All photos published on Unsplash are licensed under Creative Commons Zero which means you can copy, modify, distribute and use the photos for free, including commercial purposes, without asking permission from or providing attribution to the photographer or Unsplash.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我从来不轻易相信免费的东西，但 Unsplash 真正做到了免费的高品质。毫无犹豫，我在 &lt;a href=&quot;https://crispgm.com/&quot;&gt;crispgm.com&lt;/a&gt; 的404页面中，嵌入了 Unsplash 随机推荐图。点这里看看吧： &lt;a href=&quot;https://crispgm.com/404.html&quot;&gt;https://crispgm.com/404.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;同时，也推荐一下 &lt;a href=&quot;https://chrome.google.com/webstore/detail/unsplash-instant/pejkokffkapolfffcgbmdmhdelanoaih?hl=en&quot;&gt;Unsplash Instant&lt;/a&gt;。Unsplash 官方出品的 Chrome 扩展，每次打开一个 Tab，都会显示一张图片。&lt;/p&gt;

&lt;p&gt;感谢 &lt;a href=&quot;https://crew.co/&quot;&gt;Crew&lt;/a&gt; 让我们拥有这么美好的体验！Crew 也是一个很美的公司，有兴趣的可以自行看看它们的招聘页面和团队博客，体会一下别人家的公司是什么样。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://crew.co/app/uploads/2017/02/3can7mahta-crew-1024x794.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 30 Nov 2016 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/unsplash-simple-pure-photos.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/unsplash-simple-pure-photos.html</guid>
        
        <category>unsplash</category>
        
        
      </item>
      
    
      
      <item>
        <title>48 个你需要知道的 Jekyll 使用技巧</title>
        <description>&lt;p&gt;很久以前，本人的个人博客是 PHP 写的简单页面，实时转换 Markdown。后来，为了简单，用 PHP 写了一个静态博客转换器。虽用起来还比较舒服，但通用性太差了。于是转向 GitHub Pages 官方支持的 Jekyll，没想到只花了20分钟就完成了迁移，开发体验颇好。深入使用和参与了许久后，决定写一篇 Jekyll 相关的 Tips 的文章，仅供大家参考。&lt;/p&gt;

&lt;h2 id=&quot;简介&quot;&gt;简介&lt;/h2&gt;

&lt;h4 id=&quot;什么是-jekyll&quot;&gt;什么是 Jekyll&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; 是一个简单的，博客感知的，静态网站生成器。可以认为，Jekyll 是一个基于文件的内容管理系统（CMS）。它使用 Ruby 编写，通过 Markdown 和 Liquid 模板生成内容。&lt;/p&gt;

&lt;p&gt;Jekyll 最初由 GitHub co-founder、前首席执行官 &lt;a href=&quot;https://github.com/mojombo&quot;&gt;Tom Preston-Werner&lt;/a&gt; 创立。&lt;/p&gt;

&lt;p&gt;目前，Jekyll 的维护者是 &lt;a href=&quot;https://github.com/parkr&quot;&gt;Parker Moore&lt;/a&gt;，他本人也于&lt;a href=&quot;https://byparker.com/blog/2016/joining-github/&quot;&gt;2016年初加入了 GitHub&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;安装&quot;&gt;安装&lt;/h4&gt;

&lt;p&gt;首先，你得有 Ruby。对于 Mac 用户，可以使用 Homebrew 安装。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brew install ruby
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;然后：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gem install jekyll
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;gem-安装不上或者很慢怎么办&quot;&gt;Gem 安装不上或者很慢怎么办？&lt;/h4&gt;

&lt;p&gt;RubyGems 是一个优秀的包管理系统，但再优秀也扛不住墙和距离，所以一般情况下，中国大陆的用户需要更换 RubyGems 的源。&lt;/p&gt;

&lt;p&gt;建议更换成 Ruby-China 的源，参考 &lt;a href=&quot;https://gems.ruby-china.org/&quot;&gt;https://gems.ruby-china.org/&lt;/a&gt;。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;同时，也广告一下本人的作品：&lt;a href=&quot;https://crispgm.github.io/gsm/&quot;&gt;Gem Sources Manager&lt;/a&gt;，专门用于切换源。&lt;/p&gt;

&lt;h4 id=&quot;mac-osx-el-capitan-安装失败&quot;&gt;Mac OSX El Capitan 安装失败&lt;/h4&gt;

&lt;p&gt;从 Mac OSX El Capitan 开始，Apple 采取了一个叫 SIP 的东西保护系统文件夹，导致 &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/bin&lt;/code&gt; 等文件夹无法写入。因此需要更换安装路径。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo gem install -n /usr/local/bin jekyll
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://jekyllrb.com/docs/troubleshooting/#jekyll-amp-mac-os-x-1011&quot;&gt;https://jekyllrb.com/docs/troubleshooting/#jekyll-amp-mac-os-x-1011&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;bundler&quot;&gt;Bundler&lt;/h4&gt;

&lt;p&gt;Jekyll 3.3.0 之后开始采用 Bundler 方式运行。安装时，需要同时安装 Bundler：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gem install jekyll bundler
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;所以所有命令可能也需要使用 Bundler：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bundle exec jekyll serve
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;命令&quot;&gt;命令&lt;/h2&gt;

&lt;h4 id=&quot;使用-jekyll-new-创建新站点&quot;&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll new&lt;/code&gt; 创建新站点&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll new my-jekyll-site
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;也可以：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir my-jekyll-site
$ cd my-jekyll-site
$ jekyll new .
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;使用-jekyll-serve-在本地运行站点&quot;&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt; 在本地运行站点&lt;/h4&gt;

&lt;p&gt;以下三种使用方式是等价的：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll serve
$ jekyll server
$ jekyll s
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:4000&lt;/code&gt; 进行访问。&lt;/p&gt;

&lt;h4 id=&quot;使用-jekyll-build-生成站点&quot;&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build&lt;/code&gt; 生成站点&lt;/h4&gt;

&lt;p&gt;以下两种使用方式是等价的：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll build
$ jekyll b
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;--destination&lt;/code&gt; 指定目标路径：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll build --destination=/path/to/site
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;使用-jekyll-new-theme-创建主题&quot;&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll new-theme&lt;/code&gt; 创建主题&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll new-theme my-theme
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;基础&quot;&gt;基础&lt;/h2&gt;

&lt;h4 id=&quot;目录结构&quot;&gt;目录结构&lt;/h4&gt;

&lt;p&gt;一个基本的 Jekyll 站点目录结构：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
├── _config.yml
├── _data
|   └── members.yml
├── _drafts
|   ├── begin-with-the-crazy-ideas.md
|   └── on-simplicity-in-technology.md
├── _includes
|   ├── footer.html
|   └── header.html
├── _layouts
|   ├── default.html
|   └── post.html
├── _posts
|   ├── 2007-10-29-why-every-programmer-should-play-nethack.md
|   └── 2009-04-26-barcamp-boston-4-roundup.md
├── _sass
|   ├── _base.scss
|   └── _layout.scss
├── _site
├── .jekyll-metadata
└── index.html # 也可以是 index.md
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;_config.yml
    &lt;ul&gt;
      &lt;li&gt;Jekyll 站点的总配置文件，有很多选项也可以通过命令行方式指定。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_drafts
    &lt;ul&gt;
      &lt;li&gt;未发布的草稿，文件名不需要带有日期。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_includes
    &lt;ul&gt;
      &lt;li&gt;代码片段，可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;include&lt;/code&gt; 进行引用。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_layouts
    &lt;ul&gt;
      &lt;li&gt;布局。布局文件可以被继承，&lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;/code&gt; 用于表示被继承者的内容。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_posts
    &lt;ul&gt;
      &lt;li&gt;文件，命名需要以日期开头：如 &lt;code class=&quot;highlighter-rouge&quot;&gt;2016-12-01-my-article.md&lt;/code&gt;。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_sass
    &lt;ul&gt;
      &lt;li&gt;sass 文件，可以通过插件完成编译。也可以选择引入原生 CSS，或者 Less 等。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;_site
    &lt;ul&gt;
      &lt;li&gt;目标文件，建议加入到 &lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; 中。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;index.html/index.md
    &lt;ul&gt;
      &lt;li&gt;首页&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;_configyml&quot;&gt;_config.yml&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 是整个站点的整体配置，以下是所有配置项和默认值：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Where things are&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;       &lt;span class=&quot;s&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;./_site&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;plugins_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;_plugins&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;layouts_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;_layouts&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;data_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;s&quot;&gt;_data&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;includes_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;_includes&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;collections&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Handling Reading&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;safe&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;         &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.htaccess&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;node_modules&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;vendor/bundle/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;vendor/cache/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;vendor/gems/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;vendor/ruby/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;keep_files&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.git&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.svn&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;utf-8&quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;markdown_ext&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;markdown,mkdown,mkdn,mkd,md&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Filtering Content&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;show_drafts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;limit_posts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;unpublished&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Plugins&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;whitelist&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;gems&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;pi&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Conversion&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;markdown&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;kramdown&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;highlighter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rouge&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;lsi&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;         &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;excerpt_separator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;incremental&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Serving&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;detach&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;4000&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;127.0.0.1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;baseurl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# does not include hostname&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;show_dir_listing&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Outputting&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;permalink&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;s&quot;&gt;date&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;paginate_path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/page:num&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;s&quot;&gt;null&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;quiet&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;verbose&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;liquid&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;error_mode&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;warn&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Markdown Processors&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;rdiscount&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;redcarpet&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;kramdown&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;auto_ids&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;       &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;footnote_nr&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;entity_output&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;as_char&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;toc_levels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;s&quot;&gt;1..6&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;smart_quotes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;s&quot;&gt;lsquo,rsquo,ldquo,rdquo&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;          &lt;span class=&quot;s&quot;&gt;GFM&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;hard_wrap&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;footnote_nr&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;front-matter&quot;&gt;Front Matter&lt;/h4&gt;

&lt;p&gt;Jekyll 整个站点的配置是站点根目录下的 &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 文件，而 &lt;code class=&quot;highlighter-rouge&quot;&gt;_layout&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; 等目录下的文件中也可以有自己的变量。文件头部的 &lt;code class=&quot;highlighter-rouge&quot;&gt;yaml&lt;/code&gt; 配置被称作 Front Matter。&lt;/p&gt;

&lt;h4 id=&quot;front-matter-默认值&quot;&gt;Front Matter 默认值&lt;/h4&gt;

&lt;p&gt;可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;defaults&lt;/code&gt; 设置一个路径下 Front Matter 默认值。&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;weekly&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;weekly&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;技术周刊&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;忽略文件&quot;&gt;忽略文件&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;exclude&lt;/code&gt; 用于忽略文件或文件夹，其中 &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 和以&lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt;开头的文件或文件夹都会被自动忽略。后续版本，&lt;code class=&quot;highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; 等文件夹也被隐式忽略了（参考 _config.yml 章节）。&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Gemfile&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Gemfile.lock&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;README.md&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;LICENSE&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;分页&quot;&gt;分页&lt;/h4&gt;

&lt;p&gt;Jekyll 没有内置分页功能，而是提供了一个分页插件 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll-paginate&lt;/code&gt;。&lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll-paginate&lt;/code&gt; 仅在特定的默认条件下生效，如果你对网站结构有自己的一套，&lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll-paginate&lt;/code&gt; 可能是无法满足需求的。&lt;/p&gt;

&lt;p&gt;限制如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;分页功能必须在 HTML 格式文件中调用，如：&lt;code class=&quot;highlighter-rouge&quot;&gt;index.html&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;必须使用默认的链接格式 &lt;code class=&quot;highlighter-rouge&quot;&gt;permalink&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果想继续使用，请详细阅读 &lt;a href=&quot;http://jekyllrb.com/docs/pagination/&quot;&gt;http://jekyllrb.com/docs/pagination/&lt;/a&gt;。这是一个复杂的问题！&lt;/p&gt;

&lt;h4 id=&quot;文章摘要&quot;&gt;文章摘要&lt;/h4&gt;

&lt;p&gt;Jekyll 提供了文章摘要摘取功能，通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;post.excerpt&lt;/code&gt; 就可以获得摘要内容。&lt;/p&gt;

&lt;p&gt;我们也可以设置摘取摘要的分隔符：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;excerpt_separator: &amp;lt;!--more--&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;评论&quot;&gt;评论&lt;/h4&gt;

&lt;p&gt;由于是静态站点，我们没发内建评论系统，因此需要引入一些纯前端就可以使用的评论系统。国外推荐：&lt;a href=&quot;https://disqus.com/&quot;&gt;disqus&lt;/a&gt;，国内推荐：&lt;a href=&quot;http://duoshuo.com/&quot;&gt;duoshuo&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;page&quot;&gt;Page&lt;/h4&gt;

&lt;p&gt;可以认为，不在 &lt;code class=&quot;highlighter-rouge&quot;&gt;_post&lt;/code&gt; 目录下的页面都是 Page 而不是 Post，其它方面区别不大。&lt;/p&gt;

&lt;h4 id=&quot;collection&quot;&gt;Collection&lt;/h4&gt;

&lt;p&gt;并不是每个页面都是独立“页面”和以日期为顺序的“博文”，因此 Jekyll 引入了 Collection。Collection 可以根据路径定义一类具有相同属性的页面集合。Collection 也可以通过 Front Matter 设定默认值。&lt;/p&gt;

&lt;h4 id=&quot;data&quot;&gt;Data&lt;/h4&gt;

&lt;p&gt;Data 相当于动态页面中的数据库，Jekyll Data 支持 &lt;code class=&quot;highlighter-rouge&quot;&gt;yaml&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;CSV&lt;/code&gt; 三种格式，可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;site.data&lt;/code&gt; 直接访问。&lt;/p&gt;

&lt;p&gt;例如：&lt;/p&gt;

&lt;p&gt;团队成员有 Fa, Li, Zhang 三人，于是我们在默认路径 &lt;code class=&quot;highlighter-rouge&quot;&gt;_data&lt;/code&gt; 创建一个数据文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;member.yml&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Fa&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Li&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Zhang&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;在页面中显示团队成员列表：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;site.data.member&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;member.name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&amp;lt;/li&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;liquid-模板&quot;&gt;Liquid 模板&lt;/h2&gt;

&lt;h4 id=&quot;什么是-liquid&quot;&gt;什么是 Liquid?&lt;/h4&gt;

&lt;p&gt;Liquid 是一个开源模版语言，由电商公司 Shopify 实现，用 Ruby 编写。Shopify 自己使用 Liquid 来构建自己电商网站模板生态。&lt;/p&gt;

&lt;p&gt;详细文档请参考 &lt;a href=&quot;https://shopify.github.io/liquid/&quot;&gt;https://shopify.github.io/liquid/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;Jekyll 实用 Liquid 作为模版引擎，构建页面。&lt;/p&gt;

&lt;h4 id=&quot;变量&quot;&gt;变量&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;title&amp;gt;
{{ page.title }}
&amp;lt;/title&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;其中，Jekyll 预设了 &lt;code class=&quot;highlighter-rouge&quot;&gt;site&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;layout&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;page&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt; 四个全局变量。&lt;/p&gt;

&lt;h4 id=&quot;逻辑判断&quot;&gt;逻辑判断&lt;/h4&gt;

&lt;p&gt;Liquid 的逻辑判断跟 Ruby 完全一致。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;常见语言中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;if&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;else if&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;else&lt;/code&gt; 在 Liquid 中的对应是 &lt;code class=&quot;highlighter-rouge&quot;&gt;if&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;elsif&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;else&lt;/code&gt;。同时，Liquid 也可以使用 Ruby 特有的 &lt;code class=&quot;highlighter-rouge&quot;&gt;unless&lt;/code&gt;。&lt;/li&gt;
  &lt;li&gt;常见语言中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;switch&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt; 在 Liquid 中的对应是 &lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;when&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;为了简单，只以 &lt;code class=&quot;highlighter-rouge&quot;&gt;if&lt;/code&gt; 为例：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;page.syntax_highlight&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'false'&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;link&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;{{ site.assets }}/css/zenburn.css&quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;遍历&quot;&gt;遍历&lt;/h4&gt;

&lt;p&gt;在 Liquid 中可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;in&lt;/code&gt; 语法遍历数组，并且支持一般语言循环中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;continue&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;break&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;除此之外，还可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;offset&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;limit&lt;/code&gt; 控制遍历范围，通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;reversed&lt;/code&gt; 进行倒序。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;site.posts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;reversed&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;{{ post.permalink }}&quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;post.title&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://shopify.github.io/liquid/tags/iteration/&quot;&gt;https://shopify.github.io/liquid/tags/iteration/&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;赋值&quot;&gt;赋值&lt;/h4&gt;

&lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;assign&lt;/code&gt; 进行赋值：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;my_variable&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;capture&lt;/code&gt; 进行捕捉赋值：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;capture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;my_variable&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;am&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;being&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;captured.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;endcapture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;liquid-filters&quot;&gt;Liquid Filters&lt;/h4&gt;

&lt;p&gt;Liquid Filters 是一种针对 Liquid 中变量的过滤器，语法是：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;filter:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;param&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;除去 Liquid 自身丰富的过滤器之外，Jekyll 还额外扩展了一些实用的：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cgi_escape&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;url_escape&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;xml_escape&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;对变量进行相应的 escape&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;markdownify&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;scssify&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;sassify&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;jsonify&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;对变量内容的格式转换&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;where&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;where_exp&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;group_by&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;sort&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;对变量数据的查询排序等操作&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;详见 &lt;a href=&quot;http://jekyllrb.com/docs/templates/#filters&quot;&gt;http://jekyllrb.com/docs/templates/#filters&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;插件&quot;&gt;插件&lt;/h2&gt;

&lt;h4 id=&quot;插件简介&quot;&gt;插件简介&lt;/h4&gt;

&lt;p&gt;Jekyll 支持使用插件进行扩展，插件的类型分为：Generators、Converters、Commands、Hooks、Liquid Tag、Liquid Filter 等。&lt;/p&gt;

&lt;p&gt;如果希望开发插件，请参考 &lt;a href=&quot;http://jekyllrb.com/docs/plugins/&quot;&gt;http://jekyllrb.com/docs/plugins/&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;使用插件&quot;&gt;使用插件&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;基于 Gem 的方式&lt;/p&gt;

    &lt;p&gt;对于已经发布到 RubyGems 的插件，推荐使用这种方式。只需要在 &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中 &lt;code class=&quot;highlighter-rouge&quot;&gt;gems&lt;/code&gt; 字段加入相应插件名称即可。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;基于本地文件&lt;/p&gt;

    &lt;p&gt;对于没有发布的插件，可以在 &lt;code class=&quot;highlighter-rouge&quot;&gt;_plugins&lt;/code&gt; 文件夹中直接引入 &lt;code class=&quot;highlighter-rouge&quot;&gt;*.rb&lt;/code&gt; Ruby 源文件。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;常用插件&quot;&gt;常用插件&lt;/h2&gt;

&lt;h4 id=&quot;jekyll-watch&quot;&gt;Jekyll Watch&lt;/h4&gt;

&lt;p&gt;Jekyll “必备”的插件，因为这是 Jekyll 程序的依赖，只是因为程序结构设计被剥离成了插件。它在本地预览时，提供文件变更的自动更新，让我们每次刷新都能自动看到最新的内容。&lt;/p&gt;

&lt;p&gt;Jekyll Watch 是自动开启的：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll serve --watch
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;jekyll-compose&quot;&gt;Jekyll Compose&lt;/h4&gt;

&lt;p&gt;安装了 &lt;a href=&quot;https://github.com/jekyll/jekyll-compose&quot;&gt;Jekyll Compose&lt;/a&gt; 后，Jekyll 会额外提供一些命令，便于发布管理博文。&lt;/p&gt;

&lt;p&gt;创建草稿：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll draft
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;创建新博客：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll post
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;创建新博客：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll page
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;发布草稿：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll publish
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;撤销发布：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll unpublish
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;jekyll-admin&quot;&gt;Jekyll Admin&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-admin&quot;&gt;Jekyll Admin&lt;/a&gt; 是一个 CMS 风格的图形化后台管理插件，可以在本地给用户提供服务。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/jekyll/jekyll-admin/raw/master/screenshot.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;jekyll-seo-tag&quot;&gt;Jekyll SEO Tag&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-seo-tag&quot;&gt;Jekyll SEO Tag&lt;/a&gt; 帮你生成一大堆 Meta 标签。&lt;/p&gt;

&lt;h4 id=&quot;jemoji&quot;&gt;Jemoji&lt;/h4&gt;

&lt;p&gt;你可以通过 &lt;a href=&quot;https://github.com/jekyll/jemoji&quot;&gt;Jemoji&lt;/a&gt; 在 Jekyll 生成的网站中，加入自己 Emoji 表情。&lt;/p&gt;

&lt;p&gt;Emoji 语法采用 GitHub 的语法风格。&lt;/p&gt;

&lt;h4 id=&quot;jekyll-mentions&quot;&gt;Jekyll Mentions&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-mentions&quot;&gt;Jekyll Mentions&lt;/a&gt; 允许你在文章中直接“@” GitHub 或其它网站用户。&lt;/p&gt;

&lt;h4 id=&quot;jekyll-feed&quot;&gt;Jekyll Feed&lt;/h4&gt;

&lt;p&gt;你可以通过 &lt;a href=&quot;https://github.com/jekyll/jekyll-feed&quot;&gt;Jekyll Feed&lt;/a&gt; 在 Jekyll 生成的网站中，生成 RSS 源。&lt;/p&gt;

&lt;h4 id=&quot;jekyll-import&quot;&gt;Jekyll Import&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-import&quot;&gt;Jekyll Import&lt;/a&gt; 支持从一些国外的主流站点导入博文，如 Blogger, WordPress 和 Tumblr 等，同样也支持 RSS 和 CSV 等数据格式导入。&lt;/p&gt;

&lt;h4 id=&quot;jekyll-archives&quot;&gt;Jekyll Archives&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-archives&quot;&gt;Jekyll Archives&lt;/a&gt; 用于生成带标签和分类的『存档』页面。&lt;/p&gt;

&lt;h4 id=&quot;jekyll-redirect-from&quot;&gt;Jekyll Redirect From&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jekyll/jekyll-redirect-from&quot;&gt;Jekyll Redirect From&lt;/a&gt; 提供页面跳转功能，比较简单，也可以自行通过 JavaScript 实现。&lt;/p&gt;

&lt;h2 id=&quot;github-pages&quot;&gt;GitHub Pages&lt;/h2&gt;

&lt;h4 id=&quot;创建个人主页&quot;&gt;创建个人主页&lt;/h4&gt;

&lt;p&gt;创建一个名为 &lt;code class=&quot;highlighter-rouge&quot;&gt;your-github-username.github.io&lt;/code&gt; 的 Repo，&lt;code class=&quot;highlighter-rouge&quot;&gt;your-github-username&lt;/code&gt; 是你的用户名。&lt;/p&gt;

&lt;p&gt;只需在 Repo 中设置 GitHub Pages 的 Source，就可以开启 GitHub Pages，支持 &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; 中 &lt;code class=&quot;highlighter-rouge&quot;&gt;/docs&lt;/code&gt; 文件夹三种 Source。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/github-pages-source.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;在-github-pages-只可以使用部分插件&quot;&gt;在 GitHub Pages 只可以使用部分插件&lt;/h4&gt;

&lt;p&gt;由于安全性等原因的考虑，在 GitHub Pages 平台上只能使用白名单中的 7 个 Jekyll 插件。它们分别是：Jekyll Sitemap, Jekyll SEO Tag, github-metadata, Jekyll Feed, Jekyll Redirect From, Jemoji 和 Jekyll Mentions。&lt;/p&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://help.github.com/articles/adding-jekyll-plugins-to-a-github-pages-site/&quot;&gt;https://help.github.com/articles/adding-jekyll-plugins-to-a-github-pages-site/&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;github-pages-上的-jekyll-只支持-kramdown&quot;&gt;GitHub Pages 上的 Jekyll 只支持 kramdown&lt;/h4&gt;

&lt;p&gt;从 2016 年 5 月 1 日起，GitHub Pages 只支持 kramdown 作为 Markdown 引擎。&lt;/p&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0&quot;&gt;https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;在根目录下创建-nojekyll-文件可以跳过-jekyll-解析&quot;&gt;在根目录下创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt; 文件可以跳过 Jekyll 解析&lt;/h4&gt;

&lt;p&gt;GitHub Pages 支持 Jekyll 或者原始文件。最初 GitHub Pages 只支持 Jekyll，后来 GitHub 允许在 Repo 根目录下添加 &lt;code class=&quot;highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt; 跳过解析。&lt;/p&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://github.com/blog/572-bypassing-jekyll-on-github-pages&quot;&gt;https://github.com/blog/572-bypassing-jekyll-on-github-pages&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;你可以使用自己的域名&quot;&gt;你可以使用自己的域名&lt;/h4&gt;

&lt;p&gt;在 Source 的根路径下，创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;CNAME&lt;/code&gt; 写入域名，然后把 DNS 解析到 GitHub Pages 的 IP：&lt;code class=&quot;highlighter-rouge&quot;&gt;192.30.252.153&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;192.30.252.154&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;详见 &lt;a href=&quot;https://help.github.com/articles/using-a-custom-domain-with-github-pages/&quot;&gt;https://help.github.com/articles/using-a-custom-domain-with-github-pages/&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;你也可以为账号下任意项目创建独立的项目页面&quot;&gt;你也可以为账号下任意项目创建独立的项目页面&lt;/h4&gt;

&lt;p&gt;任何一个项目的 Repo，都可以开启这个项目的 GitHub Pages。开启方式同个人主页。&lt;/p&gt;

&lt;p&gt;如项目：&lt;a href=&quot;https://github.com/crispgm/gsm&quot;&gt;crispgm/gsm&lt;/a&gt;，设置完成后，就可以通过 &lt;a href=&quot;https://crispgm.github.io/gsm/&quot;&gt;https://crispgm.github.io/gsm/&lt;/a&gt; 进行访问。&lt;/p&gt;

&lt;h4 id=&quot;你可以通过-sitegithub-获得-repo-的信息&quot;&gt;你可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;site.github&lt;/code&gt; 获得 Repo 的信息&lt;/h4&gt;

&lt;p&gt;由上面所说的 &lt;a href=&quot;https://github.com/jekyll/github-metadata&quot;&gt;github-metadata&lt;/a&gt; 提供服务，通过 GitHub API 获取 Repo 的信息。当然，在本地环境下，也可以通过手动安装 github-metadata 来使用。&lt;/p&gt;

&lt;h4 id=&quot;私有-repo-也可以开启-github-pages&quot;&gt;私有 Repo 也可以开启 GitHub Pages&lt;/h4&gt;

&lt;p&gt;GitHub 的付费用户建立的私有项目 Private Repo，也可以开启 GitHub Pages。&lt;/p&gt;

&lt;h4 id=&quot;github-pages-无法在使用-gh-pages-分支作为源的情况下关闭&quot;&gt;GitHub Pages 无法在使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; 分支作为源的情况下关闭&lt;/h4&gt;

&lt;p&gt;有些奇怪的设定，真想关闭直接删除掉，在 Source 选择 None 就好。&lt;/p&gt;

&lt;h2 id=&quot;最后&quot;&gt;最后&lt;/h2&gt;

&lt;h4 id=&quot;本博客也是用-jekyll-生成的&quot;&gt;本博客也是用 Jekyll 生成的&lt;/h4&gt;

&lt;p&gt;Happy Jekylling!&lt;/p&gt;
</description>
        <pubDate>Sat, 19 Nov 2016 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/48-tips-for-jekyll-you-should-know.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/48-tips-for-jekyll-you-should-know.html</guid>
        
        <category>jekyll</category>
        
        <category>tips</category>
        
        
      </item>
      
    
      
      <item>
        <title>Containerizing My VPS</title>
        <description>&lt;p&gt;Docker is the &lt;em&gt;hyped&lt;/em&gt; technology in backend recently. I have no chance to use Docker, since the company I serve has been on private PaaS years before. Fortunately, I encountered problems with my own VPS. Thus, I decided to try Docker and now I want to share the process and my thought.&lt;/p&gt;

&lt;h1 id=&quot;problems&quot;&gt;Problems&lt;/h1&gt;

&lt;p&gt;So far, I use Linode VPS to deploy my websites. I update and deploy my personal website frequently, and I use GitHub webhook to trigger the updating script. With the deterioration of China’s web environment, I have to build VPN and Shadowsocks for myself, which is useful for productivity.&lt;/p&gt;

&lt;p&gt;At present, there are several services running on the VPS:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Personal website (generated by Jekyll, HTTPS certificated by Certbot&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, served by Nginx)&lt;/li&gt;
  &lt;li&gt;Personal website updater&lt;/li&gt;
  &lt;li&gt;Shadowsocks server (the core function, VPN is kind of a substitute)&lt;/li&gt;
  &lt;li&gt;PPTP VPN (changed to L2TP, since PPTP support is removed in iOS 10&lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;)&lt;/li&gt;
  &lt;li&gt;Side projects&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It seems not complicated but I did encounter problems on ops and security.&lt;/p&gt;

&lt;h2 id=&quot;provisioning&quot;&gt;Provisioning&lt;/h2&gt;

&lt;p&gt;VPS provisioning is not automated and manual provisioning is trivial and boring.&lt;/p&gt;

&lt;p&gt;On July, it was attacked and I had to rebuild my Linode. I then changed the default SSH port and it took tens of minutes to rebuild manually. Especially setting up VPN server is not easy and fallible.&lt;/p&gt;

&lt;h2 id=&quot;security-risks&quot;&gt;Security Risks&lt;/h2&gt;

&lt;p&gt;In addition to aforementioned attacks, there are other kind of security risks. For example, Shell injection and actually I just fixed one on the projects.&lt;/p&gt;

&lt;h2 id=&quot;disturbance-among-services&quot;&gt;Disturbance Among Services&lt;/h2&gt;

&lt;p&gt;Different programs may have conflicts with each other. For example, iptables is needed by VPN and it may cause failure of Nginx’s port with wrong configuration.&lt;/p&gt;

&lt;p&gt;Also, it’s not only a production server but also used in development mode, which generates trashes in system folders.&lt;/p&gt;

&lt;p&gt;Therefore, my requirements are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Simple and fast provisioning. Instant and recoverable.&lt;/li&gt;
  &lt;li&gt;Programs run in restricted sandboxes with isolated resources.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;why-docker&quot;&gt;Why Docker&lt;/h1&gt;

&lt;p&gt;Docker is a major containerization software, which packs applications into image and runs in container. The definition of container is:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Using containers, everything required to make a piece of software run is packaged into isolated containers. Unlike VMs, containers do not bundle a full operating system - only libraries and settings required to make the software work are needed. This makes for efficient, lightweight, self-contained systems and guarantees that software will always run the same, regardless of where it’s deployed.&lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Docker just meets my requirement, because of its container system. I can run the independent parts in different containers and rebuild a new Linode by initiating all the containers in an efficient way. Even I can scale my applications by the power of Docker.&lt;/p&gt;

&lt;p&gt;Every cutting-edge popular (somehow over-hyped) technology solves problems. And Docker is a trend in infrastructure field.&lt;/p&gt;

&lt;p&gt;I want to continue to use and build Docker on my current VPS node, as it has a good latency between Tokyo and Beijing, with a low ping of about 80ms. Luckily, Linode has started to support Docker since 2014&lt;sup id=&quot;fnref:4&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;h2 id=&quot;install-docker&quot;&gt;Install Docker&lt;/h2&gt;

&lt;p&gt;My Linux image is Ubuntu 14.04 LTS, installation is quite easy&lt;sup id=&quot;fnref:5&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;, simply execute:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -sSL https://get.docker.com/ | sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;P.S.: I used Ubuntu 16.04 LTS image at first, which is the lastest. But it’s not recommended. This version has conflict with &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd&lt;/code&gt;. In consequence, I got stuck in starting &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-engine&lt;/code&gt;, though I found the &lt;a href=&quot;http://stackoverflow.com/questions/37227349/unable-to-start-docker-service-in-ubuntu-16-04/37640824#37640824&quot; target=&quot;_blank&quot;&gt;solution on StackOverflow&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;make-images&quot;&gt;Make Images&lt;/h2&gt;

&lt;p&gt;Based on “products”, I need to build four container:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nginx&lt;/li&gt;
  &lt;li&gt;Certbot&lt;/li&gt;
  &lt;li&gt;Website updater&lt;/li&gt;
  &lt;li&gt;Shadowsocks&lt;/li&gt;
  &lt;li&gt;L2TP VPN Server&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;An image is describe as &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;, which is a Shell-like description file. Actually, there are images for me on Docker Hub, which is the Docker GitHub equivalent. This shows one of the advantages of Docker that, we may distribute softwares with Docker.&lt;/p&gt;

&lt;p&gt;I found a &lt;a href=&quot;https://github.com/hwdsl2/docker-ipsec-vpn-server&quot;&gt;hwdsl2/docker-ipsec-vpn-server&lt;/a&gt;, which is so complicated that use an exsited image saves me lots of time.&lt;/p&gt;

&lt;p&gt;For simplicity, I built Shadowsocks image by myself.&lt;/p&gt;

&lt;p&gt;It is not hard for a Shell user to quick start on Dockerfile, which consists of some declarations and installation processes. I simply got started by reading the &lt;a href=&quot;https://docs.docker.com/engine/reference/builder/&quot;&gt;reference&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;FROM ubuntu:trusty
MAINTAINER David Zhang &amp;lt;crispgm@gmail.com&amp;gt;
RUN apt-get update \
    &amp;amp;&amp;amp; apt-get install -y python-pip \
    &amp;amp;&amp;amp; pip install shadowsocks

COPY etc/shadowsocks.json /etc/shadowsocks.json

EXPOSE 2968

CMD /usr/local/bin/ssserver -c /etc/shadowsocks.json -d start
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;The image is based on &lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu:trusty&lt;/code&gt;, of which the version can have no relationship with the host OS. Shadowsocks is distributed on pip. Therefore, executing &lt;code class=&quot;highlighter-rouge&quot;&gt;pip install&lt;/code&gt; is the only thing in installation. At last, don’t forget to &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY&lt;/code&gt; configuration file into the image and &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPOSE&lt;/code&gt; inner port to host OS. The &lt;code class=&quot;highlighter-rouge&quot;&gt;CMD&lt;/code&gt; command is the starting point.&lt;/p&gt;

&lt;h2 id=&quot;start-container&quot;&gt;Start Container&lt;/h2&gt;

&lt;p&gt;Build the Dockerfile:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker build -t crisp/shadowsocks .
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Start in daemon mode:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run --name ssserver -d -p 2968:2968 crisp/shadowsocks
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Then I ran &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps&lt;/code&gt; but found that the container had been shutdown, no containers listed.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Docker runs only if there is a foreground process, instead of a daemon process. Shadowsocks offers foreground mode but typical server’s programs run in daemon. Here is a trick:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CMD /usr/local/bin/ssserver -c /etc/shadowsocks.json -d start \
    &amp;amp;&amp;amp; tail -f /var/log/shadowsocks.log
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;As a result, the container runs &lt;code class=&quot;highlighter-rouge&quot;&gt;tail&lt;/code&gt; command on foreground.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID IMAGE             COMMAND                CREATED      STATUS      PORTS                  NAMES
81f57c6c0710 crisp/shadowsocks &quot;/bin/sh -c '/usr/loc&quot; 22 hours ago Up 22 hours 0.0.0.0:2967-&amp;gt;2968/tcp ssserver
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;So far, the &lt;em&gt;containerization&lt;/em&gt; progress bar reached 100%. Here is the &lt;a href=&quot;https://github.com/crispgm/docker&quot;&gt;Dockerfiles&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;Compared to VMs that in lower level, Docker focuses on virtualization of applications and provides deployable softwares. We can quickly build and ship applications.&lt;/p&gt;

&lt;p&gt;In addition, Docker plays an important role in CI/CD fields and I will dive into it in the future.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;Enable HTTPS with Let’s Encrypt. &lt;a href=&quot;https://crispgm.com/page/enable-https-with-letsencrypt.html&quot;&gt;https://crispgm.com/page/enable-https-with-letsencrypt.html&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot;&gt;
      &lt;p&gt;Prepare for removal of PPTP VPN before you upgrade to iOS 10 and macOS Sierra. &lt;a href=&quot;https://support.apple.com/en-us/HT206844&quot;&gt;https://support.apple.com/en-us/HT206844&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot;&gt;
      &lt;p&gt;Docker on Linode. &lt;a href=&quot;https://blog.linode.com/2014/01/03/docker-on-linode/&quot;&gt;https://blog.linode.com/2014/01/03/docker-on-linode/&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot;&gt;
      &lt;p&gt;What is Docker &lt;a href=&quot;https://www.docker.com/what-docker&quot;&gt;https://www.docker.com/what-docker&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:5&quot;&gt;
      &lt;p&gt;Docker Quick Reference. &lt;a href=&quot;https://www.linode.com/docs/applications/containers/docker-quick-reference-cheat-sheet&quot;&gt;https://www.linode.com/docs/applications/containers/docker-quick-reference-cheat-sheet&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 18 Sep 2016 00:00:00 +0800</pubDate>
        <link>https://crispgm.com/page/containerizing-my-vps.html</link>
        <guid isPermaLink="true">https://crispgm.com/page/containerizing-my-vps.html</guid>
        
        <category>Docker</category>
        
        <category>Linode</category>
        
        <category>VPS</category>
        
        <category>DevOps</category>
        
        
      </item>
      
    
  </channel>
</rss>
