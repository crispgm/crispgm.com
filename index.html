<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Home - Crisp Blog</title>
<link rel="stylesheet" href="http://crispgm.com/style/style.css">
<link rel="stylesheet" href="http://crispgm.com/style/vs.css">
<link rel="stylesheet" href="http://crispgm.com/style/opensans.css">
<script src="http://crispgm.com/script/highlight.pack.js"></script>
<script src="http://crispgm.com/script/jquery-2.0.3.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="menu">
    <div id="menu_home">
        <a href="http://crispgm.com/">Crisp Blog</a>
    </div>
    <div id="menu_link">
        <a href="http://github.com/crispgm">Github</a>&nbsp;
        <a href="http://crispgm.com/page/about.html">About</a>
    </div>
</div>
<div id="container">

<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/mac-screenshot-path.html">Mac截图修改保存路径</a></div>
<div class="article_date">2014/09/20</div>
</div>
<div class="article_main">
<p>Mac OSX 提供<a href="http://support.apple.com/kb/HT1343?viewlocale=zh_CN">快捷键</a>进行截图，它们分别是：</p>
<table>
<thead>
<tr>
<th>组合键</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Command-Shift-3</td>
<td>将屏幕捕捉到文件</td>
</tr>
<tr>
<td>Command-Shift-Control-3</td>
<td>将屏幕内容捕捉到剪贴板</td>
</tr>
<tr>
<td>Command-Shift-4</td>
<td>将所选屏幕内容捕捉到一个文件，或按空格键仅捕捉一个窗口</td>
</tr>
<tr>
<td>Command-Shift-Control-4</td>
<td>将所选屏幕内容捕捉到剪贴板，或按空格键仅捕捉一个窗口</td>
</tr>
</tbody>
</table>
<p>功能非常赞，用起来唯一不方便的就是文件会自动保存到桌面。
我们可以通过下面的方法，设置默认的截图保存位置。</p>
<pre><code># /path/to/screenshot 是要设置的路径  
defaults write com.apple.screencapture location /path/to/screenshot  
killall SystemUIServer</code></pre></div></div>
<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/mysql-update-multirows.html">MySQL更新多条记录的不同值</a></div>
<div class="article_date">2014/09/12</div>
</div>
<div class="article_main">
<p>MySQL语句使用过程中，会用到一些多行更新的场景。比较常见的是，把多行都更新成同一个值。如：</p>
<pre><code class="language-sql">UPDATE table_name  
SET column_value=1  
WHERE column_id IN (1,2,3);</code></pre>
<p>如果更新多行数据，且值是不同的，往往会使用for循环进行更新。如：</p>
<pre><code class="language-php">foreach ($data_list as $item) {  
    $sql = "UPDATE table_name SET column={$item['value']} WHERE column={$item['id']}";  
    $ret = mysql_query($sql);  
    if ($ret === false) {  
        //...
    }  
}  </code></pre>
<p>这样写网络交互次数比较多，可能会导致性能问题，看起来也不优雅。
那能否一条SQL搞定呢？答案是肯定的。</p>
<pre><code class="language-sql">UPDATE table_name  
SET column_value = CASE column_id  
    WHEN 1 THEN 0  
    WHEN 2 THEN 1  
    WHEN 3 THEN 2  
WHERE column_id IN(1,2,3);</code></pre>
<p>同理，也可以使用此方法设置多行多个值。</p>
<pre><code class="language-sql">UPDATE table_name  
SET column_value = CASE column_id  
    WHEN 1 THEN 0  
    WHEN 2 THEN 1  
    WHEN 3 THEN 2,  
SET column_desc = CASE column_id  
    WHEN 1 THEN 'test 1'
    WHEN 2 THEN 'test 2'
    WHEN 3 THEN 'test 3'
WHERE column_id IN(1,2,3);</code></pre></div></div>
<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/php-casting-vs-intval.html">[翻译]PHP: int(强制转换) vs. intval()</a></div>
<div class="article_date">2014/09/03</div>
</div>
<div class="article_main">
<h3>原文信息</h3>
<p>Original Page: </p>
<blockquote>
<p><a href="http://hakre.wordpress.com/2010/05/13/php-casting-vs-intval">PHP: Casting vs. intval()</a></p>
<p>By <strong>Hakre</strong>, <a href="http://hakre.wordpress.com">hakre.wordpress.com</a>  </p>
<p>May 13th, 2010</p>
</blockquote>
<h3>正文</h3>
<p>在PHP中，使用<code>(int)$var</code>方式进行类型转换比使用<code>intval($var)</code>函数方式快400%到650%。</p>
<h4>运行测试</h4>
<h4>(int)$val vs. intval($val) 速度对比[测试 #1]</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>(INT)$val</th>
<th>INTVAL($val)</th>
<th>比率</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.068180</td>
<td>/ 0.448819</td>
<td>658%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.067972</td>
<td>/ 0.448907</td>
<td>660%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.072348</td>
<td>/ 0.450288</td>
<td>622%</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.087305</td>
<td>/ 0.469350</td>
<td>537%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.087590</td>
<td>/ 0.471153</td>
<td>537%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.089154</td>
<td>/ 0.469826</td>
<td>526%</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 0.068234</td>
<td>/ 0.451035</td>
<td>661%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.089344</td>
<td>/ 0.470391</td>
<td>526%</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 0.072989</td>
<td>/ 0.451909</td>
<td>619%</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.088196</td>
<td>/ 0.469347</td>
<td>532%</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 0.068378</td>
<td>/ 0.449884</td>
<td>657%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.068770</td>
<td>/ 0.449416</td>
<td>653%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.068927</td>
<td>/ 0.448028</td>
<td>650%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.072599</td>
<td>/ 0.450618</td>
<td>620%</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0.086305</td>
<td>/ 0.467347</td>
<td>541%</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.102120</td>
<td>/ 0.484245</td>
<td>474%</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0.092310</td>
<td>/ 0.472185</td>
<td>511%</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 0.112644</td>
<td>/ 0.494482</td>
<td>438%</td>
</tr>
</tbody>
</table>
<h4>(int)$val vs. intval($val) 速度对比[测试 #2]</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>(INT)$val</th>
<th>INTVAL($val)</th>
<th>比率</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.045576</td>
<td>/ 0.194759</td>
<td>427%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.042457</td>
<td>/ 0.194273</td>
<td>457%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.047853</td>
<td>/ 0.196049</td>
<td>409%</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.055792</td>
<td>/ 0.209531</td>
<td>375%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.055158</td>
<td>/ 0.208236</td>
<td>377%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.056604</td>
<td>/ 0.209486</td>
<td>370%</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 0.042580</td>
<td>/ 0.194606</td>
<td>457%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.056834</td>
<td>/ 0.209276</td>
<td>368%</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 0.045320</td>
<td>/ 0.196626</td>
<td>433%</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.054923</td>
<td>/ 0.209295</td>
<td>381%</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 0.042582</td>
<td>/ 0.195295</td>
<td>458%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.042673</td>
<td>/ 0.194469</td>
<td>455%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.042560</td>
<td>/ 0.194363</td>
<td>456%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.045553</td>
<td>/ 0.197149</td>
<td>432%</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0.054069</td>
<td>/ 0.206131</td>
<td>381%</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.066170</td>
<td>/ 0.218996</td>
<td>330%</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0.057587</td>
<td>/ 0.210010</td>
<td>364%</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 0.071908</td>
<td>/ 0.224338</td>
<td>311%</td>
</tr>
</tbody>
</table>
<p>这组测试每个项目进行了100000次循环。两个测试都在windows上运行。系统#1使用的是PHP 5.2.8，而系统#2使用PHP 5.2.9并且有更高的CPU、内存和硬盘速度。</p>
<h4>intval()和int的结果对比</h4>
<p>为了证明intval()和int得到同样的值，我进行了另一个测试：</p>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>期待结果</th>
<th>INTVAL($val)</th>
<th>(INT)$val</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: -42</td>
<td>/ -42</td>
<td>/ -42</td>
<td>通过</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 4</td>
<td>/ 4</td>
<td>/ 4</td>
<td>通过</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: -42</td>
<td>/ -42</td>
<td>/ -42</td>
<td>通过</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 34</td>
<td>/ 34</td>
<td>/ 34</td>
<td>通过</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 1410065408</td>
<td>/ 1410065408</td>
<td>/ 1410065408</td>
<td>通过</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 1</td>
<td>/ 1</td>
<td>/ 1</td>
<td>通过</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 26</td>
<td>/ 26</td>
<td>/ 26</td>
<td>通过</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 42000000</td>
<td>/ 42000000</td>
<td>/ 42000000</td>
<td>通过</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 2147483647</td>
<td>/ 2147483647</td>
<td>/ 2147483647</td>
<td>通过</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: -2147483648</td>
<td>/ -2147483648</td>
<td>/ -2147483648</td>
<td>通过</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0</td>
<td>/ 0</td>
<td>/ 0</td>
<td>通过</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 2147483647</td>
<td>/ 2147483647</td>
<td>/ 2147483647</td>
<td>通过</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0</td>
<td>/ 0</td>
<td>/ 0</td>
<td>通过</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 1</td>
<td>/ 1</td>
<td>/ 1</td>
<td>通过</td>
</tr>
</tbody>
</table>
<h4>settype()和intval()速度对比[测试 #1]</h4>
<p>用于对比，我还进行了settype()和intval()速度测试。
两者的差别并不大，但我不确定这个测试是否合理，因为并不容易直接对这个函数进行测试。既然已经跑了这个测试，我认为值得把结果同前面的数据一起分享出来。</p>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>SETTYPE($val)</th>
<th>INTVAL($val)</th>
<th>比率</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.533901</td>
<td>/ 0.477519</td>
<td>89%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.533729</td>
<td>/ 0.478345</td>
<td>89%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.536932</td>
<td>/ 0.480030</td>
<td>89%</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.547209</td>
<td>/ 0.503447</td>
<td>92%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.553214</td>
<td>/ 0.501764</td>
<td>90%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.551974</td>
<td>/ 0.503403</td>
<td>91%</td>
</tr>
<tr>
<td>#6</td>
<td>34</td>
<td>: 0.532637</td>
<td>/ 0.478039</td>
<td>89%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.552709</td>
<td>/ 0.505796</td>
<td>91%</td>
</tr>
<tr>
<td>#8</td>
<td>0x1A</td>
<td>: 0.536864</td>
<td>/ 0.481672</td>
<td>89%</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.550352</td>
<td>/ 0.506748</td>
<td>92%</td>
</tr>
<tr>
<td>#10</td>
<td>26</td>
<td>: 0.537672</td>
<td>/ 0.478947</td>
<td>89%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.536360</td>
<td>/ 0.478373</td>
<td>89%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.541348</td>
<td>/ 0.490556</td>
<td>90%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.539018</td>
<td>/ 0.486669</td>
<td>90%</td>
</tr>
<tr>
<td>#14</td>
<td>4.2E+20</td>
<td>: 0.554357</td>
<td>/ 0.499877</td>
<td>90%</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.566189</td>
<td>/ 0.522929</td>
<td>92%</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0.549919</td>
<td>/ 0.505488</td>
<td>91%</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 0.578893</td>
<td>/ 0.527864</td>
<td>91%</td>
</tr>
</tbody>
</table>
<p>更新：</p>
<p>我进行了一些关于0 + $var的测试，因为这也是一种获得数字的方式。
这种方法没那么"类型安全"，不过作为对比，我认为有必要一起列出来：</p>
<h4>intval()和0 + $var对比结果</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>期待结果</th>
<th>INTVAL($val)</th>
<th>0+$VAR</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: -42</td>
<td>/ -42</td>
<td>/ -42</td>
<td>通过</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 4</td>
<td>/ 4</td>
<td>/ 4.2</td>
<td>不通过</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: -42</td>
<td>/ -42</td>
<td>/ -42</td>
<td>通过</td>
</tr>
<tr>
<td>#6</td>
<td>042</td>
<td>: 34</td>
<td>/ 34</td>
<td>/ 34</td>
<td>通过</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 42</td>
<td>/ 42</td>
<td>/ 42</td>
<td>通过</td>
</tr>
<tr>
<td>#8</td>
<td>1e10</td>
<td>: 1410065408</td>
<td>/ 1410065408</td>
<td>/ 10000000000</td>
<td>不通过</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 1</td>
<td>/ 1</td>
<td>/ 10000000000</td>
<td>不通过</td>
</tr>
<tr>
<td>#10</td>
<td>0x1A</td>
<td>: 26</td>
<td>/ 26</td>
<td>/ 26</td>
<td>通过</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 42000000</td>
<td>/ 42000000</td>
<td>/ 42000000</td>
<td>通过</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 2147483647</td>
<td>/ 2147483647</td>
<td>/ 2147483647</td>
<td>通过</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: -2147483648</td>
<td>/ -2147483648</td>
<td>/ 2147483648</td>
<td>不通过</td>
</tr>
<tr>
<td>#14</td>
<td>420000000000000000000</td>
<td>: 0</td>
<td>/ 0</td>
<td>/ 4.2E+20</td>
<td>不通过</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 2147483647</td>
<td>/ 2147483647</td>
<td>/ 4.2E+20</td>
<td>不通过</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 0</td>
<td>/ 0</td>
<td>/ 报错</td>
<td>跳过</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 1</td>
<td>/ 1</td>
<td>/ 报错</td>
<td>跳过</td>
</tr>
</tbody>
</table>
<h4>(int)$val和0 + $var速度测试[系统 #1]</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>输入</th>
<th>(INT)$val</th>
<th>0+$val</th>
<th>比率</th>
</tr>
</thead>
<tbody>
<tr>
<td>#0</td>
<td>42</td>
<td>: 0.068794</td>
<td>/ 0.069249</td>
<td>100%</td>
</tr>
<tr>
<td>#1</td>
<td>-42</td>
<td>: 0.074688</td>
<td>/ 0.069155</td>
<td>92%</td>
</tr>
<tr>
<td>#2</td>
<td>4.2</td>
<td>: 0.073207</td>
<td>/ 0.069257</td>
<td>94%*</td>
</tr>
<tr>
<td>#3</td>
<td>'42'</td>
<td>: 0.086568</td>
<td>/ 0.076261</td>
<td>88%</td>
</tr>
<tr>
<td>#4</td>
<td>'+42'</td>
<td>: 0.087230</td>
<td>/ 0.080867</td>
<td>92%</td>
</tr>
<tr>
<td>#5</td>
<td>'-42'</td>
<td>: 0.090189</td>
<td>/ 0.075923</td>
<td>84%</td>
</tr>
<tr>
<td>#6</td>
<td>042</td>
<td>: 0.069072</td>
<td>/ 0.069243</td>
<td>100%</td>
</tr>
<tr>
<td>#7</td>
<td>'042'</td>
<td>: 0.088535</td>
<td>/ 0.082137</td>
<td>92%</td>
</tr>
<tr>
<td>#8</td>
<td>1e10</td>
<td>: 0.072930</td>
<td>/ 0.069512</td>
<td>95%*</td>
</tr>
<tr>
<td>#9</td>
<td>'1e10'</td>
<td>: 0.086942</td>
<td>/ 0.082032</td>
<td>94%</td>
</tr>
<tr>
<td>#10</td>
<td>0x1A</td>
<td>: 0.068921</td>
<td>/ 0.069365</td>
<td>100%</td>
</tr>
<tr>
<td>#11</td>
<td>42000000</td>
<td>: 0.069203</td>
<td>/ 0.069415</td>
<td>100%</td>
</tr>
<tr>
<td>#12</td>
<td>2147483647</td>
<td>: 0.069109</td>
<td>/ 0.069386</td>
<td>100%</td>
</tr>
<tr>
<td>#13</td>
<td>2147483648</td>
<td>: 0.073053</td>
<td>/ 0.069277</td>
<td>94%*</td>
</tr>
<tr>
<td>#14</td>
<td>420000000000000000000</td>
<td>: 0.092318</td>
<td>/ 0.069463</td>
<td>75%*</td>
</tr>
<tr>
<td>#15</td>
<td>'420000000000000000000'</td>
<td>: 0.105735</td>
<td>/ 0.211617</td>
<td>200%*</td>
</tr>
<tr>
<td>#16</td>
<td>array()</td>
<td>: 跳过</td>
</tr>
<tr>
<td>#17</td>
<td>array('foo', 'bar')</td>
<td>: 跳过</td>
</tr>
</tbody>
</table>
<p><em>*: 在上一个测试中，结果未通过</em></p>
<h4>测试结论</h4>
<p>使用(int)类型转换，便捷而且没有负面效果。
事实上，它在速度快的同时，还和intval()函数有完全一样的结果。
两者甚至还会有同样的warning信息。</p>
<h4>扩展阅读</h4>
<ul>
<li><a href="http://stackoverflow.com/questions/1912599/php-is-there-any-particular-difference-between-intval-and-int">PHP: Is there any particular difference between intval and (int)?</a>  </li>
<li><a href="http://stackoverflow.com/questions/239136/fastest-way-to-convert-string-to-integer-in-php">Fastest way to convert string to integer in PHP</a></li>
</ul>
<h4>深层原因</h4>
<p>对于作者的结论，网友Joseph Scott对OPCODE进行了分析，解释了其深层原因。</p>
<h2>intval()  </h2>
<pre><code>0 ASSIGN  
1 SEND_VAR  
2 DO_FCALL  
3 ASSIGN  
4 RETURN  
5* ZEND_HANDLE_EXCEPTION</code></pre>
<h2>int  </h2>
<pre><code>0 ASSIGN  
1 CAST  
2 ASSIGN  
3 RETURN  
4* ZEND_HANDLE_EXCEPTION</code></pre>
<h4>最终结论</h4>
<ol>
<li>int比intval()快3-6倍。  </li>
<li>SEND_VAR和DO_FACALL操作，是导致int比intval()快很多的原因。</li>
</ol></div></div>
<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/moon-and-stars.html">看月亮和看星星</a></div>
<div class="article_date">2014/08/17</div>
</div>
<div class="article_main">
<h5>Copyright &copy; 芒果派</h5>
<h5>转自 <a href="http://atomatopie.tumblr.com/post/94999424136"><a href="http://atomatopie.tumblr.com/post/94999424136">http://atomatopie.tumblr.com/post/94999424136</a></a></h5>
<p>回想和小琳琳在一起的时候，我们在无意间做了很多都是是彼此的第一次的事情。</p>
<p>比如有一次，我们吃完晚饭去gym锻炼，走到campus square的时候，天上就开始飘起了雪花，生长在大湖建的小琳琳从来没看过下雪，当时惊喜地像个小孩，印象里，他好像特别兴奋地说，这是初雪啊，今年的初雪啊，我真没想到这辈子第一次看雪，竟然是跟小罗罗一起看的啊！我就在一旁吃吃地笑，嘲笑他没见过世面。除了看雪，我们还一起去看过月亮，看过星星，这个也就是今天要说的故事。</p>
<p>有一天晚上，我们从实验室出来，当时正好台风sandy扫荡过屌丝镇，惠风和畅，天朗气清。突然，小琳琳指着天上的月亮说，你看月晕。我第一次听到这个名词，似懂非懂地看着月亮，那月亮很亮，清澈的玉盘被蒙上羞涩的棉纱，周围出现了一个银白色的光环。我问小琳琳，月晕是什么啊？小琳琳说，月光通过云层中的冰晶时，经折射而成的光在月亮周围形成光圈，有时也呈银白色光圈，这些‘晕’其实就是卷层云，我们上科学课的时候也说到，冷空气遇到暖和的湿空气，就形成要下雨的云，这时，天上很冷，水滴都冻成了六角形的冰晶，当晚上的月光照射这些冰晶时，就形成了月晕。其实，小琳琳当时也解释了一大堆，后来我全给忘了，以上的释义全部来源于百度百科。我们就一边看着月亮，一边走回家，在家门口还给月晕拍了照片，结果因为像素太渣，拍下来的照片像是黑夜里的一盏白炽灯。我和小琳琳都觉得很可惜，于是我俩决定要买一台单反，下次再看到月晕的时候就可以拍下来。现在虽然有了单反，但这一拍星星拍月亮的计划却永远地流产了，也不知道我这辈子还能不能再看见一次月晕。</p>
<p>还有一次，也是冬天，我们从实验室出来，小琳琳说，今天天上星星好多啊，你看，猎户座！我就傻乎乎地问他哪个是猎户座。小琳琳嘲笑我说，猎户座是最好找的星座，因为有三颗小星星连成一条线，还有两颗大星星在下面组成了一个梯形。于是在北斗七星之后，我终于又认识了一个星座。看完猎户座，我还觉得不过瘾，朝小琳琳瞎嚷嚷说，好久没坐车了，我们开着车去山顶看吧。小琳琳想了一会说，你是萌萌萌小罗罗吗，那我们去mountain top campus看星星吧。我说，好啊好啊，正好可以试试star walk准不准。</p>
<p>小琳琳开着他的煤矿老板专用小雅阁，沿着盘山公路开到了山顶。天气实在太冷，我哆哆嗦嗦地打开了star walk准备校准。就在这时，小琳琳向我展示了他高逼格的天文知识，他指着我们头顶的一颗星星说，这颗最亮的星星是天鹅座β星，英文叫Albireo，它距离地球385光年，我们现在用裸眼观测天鹅座β是一颗单星。在那一瞬间，我对小琳琳真的崇拜地一塌糊涂，由衷地惊呆了。但小琳琳继续很冷静地向我解说，但事实上，借助天文望远镜观察，通常所谓的天鹅座β实际上是颗双星，一颗是黄色的，另一个是蓝色的，从地球观测相距34弧秒，因为两颗子星的颜色正好相反，所以这是全天颜色差距最显著的双星，过去，人们认为它们仅仅是光学双星，两者之间并没像真正的双星系统那样有公共点做轨道运行，无论如何，尽管两者间的距离遥远，但现在一般都认为它们是真正的双星。我听得云里雾里，但实在是被小琳琳这满腹天文经纶佩服地五体投地，只是嘿嘿嘿地笑了几下，认真地看着天鹅座。突然，一个闪着绿光、蓝光、黄光的飞行体快速移动，“小琳琳，那是飞碟吗？”我几乎是喊了出来！“你是超级幸运星小罗罗吗？”“嗯？什么？那是飞碟还是啥！”我还是不敢相信自己的眼睛，小琳琳却笑着说，“那颗是行星啊！超级幸运小罗罗，我们刚刚目击了颗小行星啊，全世界每年只有约250个人才能看到呢！”我看着小琳琳，傻傻地说不出话来，只听得小琳琳说，“因为太空各种旋转，总会有新的小行星误入能被地球观测到的区域！”说完，他跑去车里拿出了笔，在纸上写起了各路公式，我不明所以地看着他，不知道他要做什么。只见小琳琳图了一会，突然开口说，“算好啦！”“什么？”小琳琳指着小行星划过的天边说，今晚的这颗小行星就是我们一起新发现的，我给他命名为2014LL 南瓜派星，因为你做的南瓜派是世界上最好吃的南瓜派。我哈哈哈哈大笑，“小琳琳，你还能再土一点吗？”他却一本正经地说，“这是实话，我最喜欢芒果派做的南瓜派。”我内心好是欢喜，只顾抿着嘴傻笑。小琳琳继续说，“刚我算了，这颗南瓜派星，哈哈，我也觉得这个名字好好笑，这颗南瓜派星的周期是83年，83年以后我们还要一起看！”“哈哈哈”我心里又是高兴，又是感动，却还是傻不拉几地煞风景地问了句，“83年以后还不知道能不能看见呢！”“你是超级笨笨小罗罗吗？”小琳琳拍着我头反问道，“那就代表要永远在一起拉！”甜言蜜语听得我又惊又喜，一冲动就bia叽一下在小琳琳脸上亲了一口。</p></div></div>
<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/favo-apps-mac.html">我喜欢的应用——Mac篇</a></div>
<div class="article_date">2014/08/10</div>
</div>
<div class="article_main">
<h4>前言</h4>
<blockquote>
<p>子贡问为仁。子曰：“工欲善其事，必先利其器。居是邦也，事其大夫之贤者，友其士之仁者。”</p>
<p>——孔子（春秋）《论语·卫灵公》</p>
</blockquote>
<p>平时在工作生活中，特别注意对工具的选择和使用，无论是在PC、MAC、iPhone、iPad以至vim和shell中都是如此。
探索和体验新的工具是平时的一个小爱好。</p>
<p>开始前，说几个也许有点扯的前提：</p>
<ul>
<li>极简主义者，不喜欢功能和UI特别复杂的app</li>
<li>喜欢反应快速的东西</li>
<li>略有强迫症，图标非常不搭的app有点受不了，所以同等情况下会选择图标好看的，实在不可替代就丢到Folder中 :)</li>
<li>有娱乐但没有游戏，本人爱玩游戏但对手机游戏完全无爱</li>
</ul>
<h4>正文</h4>
<h4><em>Development</em></h4>
<p><strong>Chrome</strong>
速度快，自带同步，全平台支持，还可以不同类型终端之间访问书签和打开的页面。
强大的插件支持，去优酷广告、JSON格式化显示和HTTP代理都很需要。</p>
<p><em>Why not Safari?</em></p>
<ol>
<li>
<p>对Chrome的插件有强需求</p>
</li>
<li>
<p>本人偶尔会开发Chrome插件</p>
</li>
<li>
<p>在Windows上肯定会选择Chrome</p>
</li>
<li>喜欢Chrome的设计</li>
</ol>
<p><strong>Sublime Text</strong>
Sublime不是真的免费软件，但免费就可以使用全功能，只是会不定期提示你购买。
当时刚回国，卡里有几十澳元，因为很喜欢这个软件，也就付费了。
其实用的并不熟，大部分情况下只用到他自带的语法高亮、主题、语法提示、缩进调整和代码自动格式化相关的一些功能，这些功能都很nice。
Sublime也支持"插件"(叫做package)。比如写Markdown时可以用MarkdownEditing即时预览。
近期，我打算对Sublime的高级用法进行下探索，以后会单独发文介绍的。</p>
<p><em>ps</em>: 
Sublime有一个很吸引人的特性，就是多行编辑。不过，在我一次进行了一次选择了两万行再结尾加逗号的尝试后，发现这个功能在量大(其实两万真不能算量大)的时候完全没法用。</p>
<p><strong>Dash</strong>
API文档查询工具，收录了各种编程语言、框架和工具之类的API Documentation、User Manual和Cheat Sheet什么的。从此查文档不用现场Google了。</p>
<h4><em>Productivity</em></h4>
<p><strong>Apple Mail</strong>
本来打算使用Mac自带Mail，结果发现非常的不给力，于是放弃。
主要有两点比较不能忍受：</p>
<ol>
<li>收取Gmail有时会导致进程hang死，为此还专门研究了<a href="http://crispgm.com/page/mac-mail.html">解决方法</a>。</li>
<li>加载和删除邮件操作非常慢，经常删个垃圾邮件删半天。</li>
</ol>
<p><strong>Airmail</strong>
Airmail可以说是现在Mac最火的email client，购入后(￥12)只是收收生活上的邮件，所以其实也没有认真用。
只能说体验挺好的，特别是跟Gmail配合的很好，具体优点有待更深层体会。
目前还有些小毛病，比如126邮箱无法删除邮件。</p>
<p><strong>Wunderlist</strong>
我最喜欢的应用，没有之一。之前<a href="http://crispgm.com/page/favo-apps-iphone.html">iPhone篇</a>中已有介绍，在此不再介绍。
需要说一句的是，Mac版同步能力也很弱，可能比手机还弱。</p>
<p><strong>Evernote</strong>
强大印象笔记！之前<a href="http://crispgm.com/page/favo-apps-iphone.html">iPhone篇</a>中已有介绍，在此不再介绍。</p>
<p><strong>欧陆词典 EuDic</strong>
之前用Google Translate，毕竟不是专业词典，精确性不太好。
欧陆词典检索速度很快，功能简单够用。</p>
<h4><em>Social</em></h4>
<p><strong>WeChat</strong>
微信本来只有手机版，后来出了网页版，至于iPad和Windows用户只能并没有独立的版本。
而对于相对小众的Mac，却有Mac版的微信，不得不说算是一种福利了。
Mac版微信是Native Client，不过功能上跟网页版保持一致。
需要手机扫码才能登陆，只支持正常的聊天功能，不支持朋友圈等扩展功能。</p>
<p><strong>QQ</strong>
原先版本的Mac qq就是一废品，而打开现在的3.1.2，绝对是一款好产品了。
界面极简，设计也是Mac风格，不一样的qq体验。</p>
<h4>相关阅读</h4>
<ul>
<li><a href="http://crispgm.com/page/favo-apps-iphone.html">我喜欢的应用——iPhone篇</a></li>
<li>我喜欢的应用——iPad篇</li>
<li>我喜欢的应用——Win7篇</li>
</ul></div></div>
<div class="article">
<div class="article_head">
<div class="article_title"><a href="http://crispgm.com/page/favo-apps-iphone.html">我喜欢的应用——iPhone篇</a></div>
<div class="article_date">2014/05/29</div>
</div>
<div class="article_main">
<h4>前言</h4>
<blockquote>
<p>子贡问为仁。子曰：“工欲善其事，必先利其器。居是邦也，事其大夫之贤者，友其士之仁者。”</p>
<p>——孔子（春秋）《论语·卫灵公》</p>
</blockquote>
<p>平时在工作生活中，特别注意对工具的选择和使用，无论是在PC、MAC、iPhone、iPad以至vim和shell中都是如此。
探索和体验新的工具是平时的一个小爱好。</p>
<p>开始前，说几个也许有点扯的前提：</p>
<ul>
<li>极简主义者，不喜欢功能和UI特别复杂的app</li>
<li>喜欢反应快速的东西</li>
<li>略有强迫症，图标非常不搭的app有点受不了，所以同等情况下会选择图标好看的，实在不可替代就丢到Folder中 :)</li>
<li>有娱乐但没有游戏，本人爱玩游戏但对手机游戏完全无爱</li>
</ul>
<h4>正文</h4>
<h4><em>General</em></h4>
<p><strong>Chrome</strong>
PC上必备，因此手机上也装了它，这样可以同步使用收藏夹和访问其他设备上Chrome打开了的网页。</p>
<p><strong>Safari</strong>
Safari是某种意义上鉴定一个人英语水平的一个单词:)，
一般人会认为它读作['sæfəri]，实际上应该读作[sə'färi]或[sə'fari]。</p>
<p>虽说我常使用Chrome，但那更多的是受PC习惯影响，单说在iPhone上，Safari已经足够好。</p>
<p><strong>Apple Mail</strong>
并不很热衷在手机上看工作邮件，使用iPhone自带收一些私人邮件完全满足需求。
况且，手机上的Mail比Mac上的Mail稳定的多。</p>
<p><strong>Apple Maps</strong>
虽说刚出来时被人吐槽，不过我用的时候已经很带感了。
不喜欢那些功能复杂的地图，集成了寻路、打车和附近商家之类的功能。
只需要一个准确详细的地图的话，我想它已经足够好。</p>
<h4><em>Reading</em></h4>
<p><strong>Reeder</strong>
售价￥30，绝对物有所值，免费可以选Feedly，但收费的话我推荐Reeder。
Feedly不挂VPN实在会经常刷不出来，挂了VPN速度也不快。
反观Reeder可以直接登录Feedly帐号，速度还飞快，UI设计也更有阅读质感。
值得一提的是，Reeder的share功能反应特别快，分享到Pocket一点就行，完全无滞后感。</p>
<p><strong>Pocket</strong>
传说中的Read it later，Reeder中的RSS源比较多，希望深度阅读的认为，可以从Reeder中share到Pocket。
从阅读体验来说，其实Reeder更好些，但Pocket也逊色的不多。
最近刚出了Premium版，就是太贵了点，价格跟Evernote完全一致。
可以离线存储文章，从此不用再担心出现死链了。
不过，我们也可以选择把需要永久保存的内容直接再share到Evernote上。
因此，这就形成了一个<em>阅读链</em>。</p>
<p><em>阅读链</em>：</p>
<ol>
<li>
<p>Reeder订阅RSS</p>
</li>
<li>
<p>Reeder初步阅读，把感兴趣的share到Pocket</p>
</li>
<li>Pocket上深度阅读，把有用的永久保存在Evernote</li>
</ol>
<p><em>PS:</em> 真的书籍就不在手机或平板上阅读了，有Kindle和实体书。</p>
<p><strong>Instapaper</strong>
Instapaper同Pocket是宿敌，定位相似，价格￥25。
个人体验是Instapaper更专注阅读纯文本，对于文本的排版比Pocket略好。
跟Reeder的设计风格相似，颇为神似，两者配合起来很有感觉。
但它的文章抓取速度比Pocket慢太多了，不知是不是国内网络的原因。
综合的来说，价格算是值得，但我想Pocket其实已经够了。</p>
<h4><em>Productivity</em></h4>
<p><strong>Wunderlist</strong>
德国出品，wunder是德语wonder的意思。
简洁易用的TODO list类app，平时自己要做的事情都记在上面。
UI设计不跟风，至今还不是扁平化但却仍旧觉得很美。勾选操作也很有快感！
缺点是iOS/Mac上同步极其不稳定。</p>
<p>2014.7.31 Wunderlist 3发布。
这是一次大版本的升级，完成了技术重构和界面设计。
Wunderlist终于变成了扁平风格。
其他方面，主要的升级就是分享list和更简单的Collaboration。
以及所谓的Real-time sync，不过实测表明，iOS/Mac上同步依旧不给力，比原先提升的很有限，远远算不上实时。</p>
<p><strong>Evernote</strong>
强大印象笔记！免费基本可以用的很滋润。
对于一些数据量比较大的同学可能每个月60M比较不够，需要每个月可以使用1G的VIP服务。
参加买一送三买了VIP，其实用不上绝大多数功能，主要用到就是Presentation Mode以及iPhone上的密码锁。
Presentation Mode是我最喜欢的VIP功能，就是把笔记当作幻灯片演示。
平时工作时我会用印象笔记当Office用，可以记事、可以做表格、可以展示note。</p>
<p><strong>百度云</strong>
2TB真心赞，离线下载可以省去用迅雷。
之前有一个像素的解锁瑕疵，iPhone上至少已经修复了。
况且目前还是内网用户，没有不用的理由。</p>
<p><strong>Dropbox</strong>
对于本人来说，算是百度云的冷备，毕竟墙外数据安全性强点。
但又毕竟在墙内会比较卡，而且Dropbox容量只有2G，所以用于备份一些重要数据。</p>
<p><strong>欧陆词典 EuDic</strong>
之前用Google Translate，毕竟不是专业词典，精确性不太好。
欧陆词典检索速度很快，功能简单够用。</p>
<h4><em>Social</em></h4>
<p><strong>WeChat</strong>
主要沟通工具。虽然很臃肿了，但真心不能不用。</p>
<p><strong>QQ</strong>
基本功能的用户体验很好，但iPhone版极其臃肿，功能很杂。
幸好的是，腾讯的标签页设计的很合理，额外的功能同基础功能，有一种眼不见心不烦的意思。</p>
<p><strong>VVebo</strong>
官方微博客户端功能好多，体积好大，完全用不上。
买了WeicoPro但是近期的版本质量好差很容易crash，而且页面排版也不是很满意。
VVebo简洁功能够用，阅读感觉好！</p>
<p><strong>Instragram</strong>
图片社交软件，可以围观各种文艺妹子，就是加载速度什么的略慢。
不过后来一想，能看到就不错了，这货用的是<del>facebook</del>的CDN！</p>
<h4><em>Weather</em></h4>
<p><strong>Yahoo Weather</strong>
获得过设计大奖，界面非常漂亮，背景图是根据地理位置从Flickr上获取的美图，非常美的app。
缺点是由于每次进去都要下高清图，因此流量消耗不小。
还有就是Flickr上的城市美图项目已经不更新了，所以图片是有限的。</p>
<p><strong>Weather Dial</strong>
极简主义设计的天气app，卖的就是设计，价格要12元，限免时拿下。
不支持多城市，只支持地理定位当前城市，功能上比较普通。</p>
<p><strong>Accu Weather</strong>
史上最准确的天气预报app，精确到小时，没别的，就是精确。
UI也比较高大上，就是设计是按照4/4s长度来的，所以底部会有留白。
还有就是图标很难看。</p>
<p><strong>Apple Weather</strong>
简单实用的天气app，完全可以满足大多数日常需求。</p>
<p><strong>Air Quality</strong>
由于天气类app中没有选择国产，所以需要用它查看空气污染指数。</p>
<h4><em>Finance</em></h4>
<p><strong>支付宝</strong>
很实用的app，移动支付必备，AA也很方便，而且还可以当作支付Token用。</p>
<p><strong>招商银行</strong>
其中装了两个，一个是招商银行客户端而另一个是掌上生活。
前者主要功能是查询和管理工资卡，后者是处理信用卡事宜。
当然，作为用户体验最好的国内银行之一，招商银行的客户端在银行界那也是没得说！</p>
<h4><em>Workout</em></h4>
<p><strong>Abs Workout: Get Your Six Pack</strong>
练腹肌用的，你懂的。</p>
<p><em>Updated on August 10, to be continued.</em></p>
<h4>相关阅读</h4>
<ul>
<li>我喜欢的应用——iPad篇</li>
<li><a href="http://crispgm.com/page/favo-apps-mac.html">我喜欢的应用——Mac篇</a></li>
<li>我喜欢的应用——Win7篇</li>
</ul></div></div>
<nav id="page"><a href="http://crispgm.com/index-2.html" id="next">next</a></nav></div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50708664-1', 'crispgm.com');
ga('send', 'pageview');
</script>
<div>
<footer>
	Copyright &copy; Crisp, 2014.
</footer>
</div>
</body>
</html>

